<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 
 <title>方莲 | William</title>
 <link href="http://williamlfang.github.com/cn/" rel="self"/>
 <link href="http://williamlfang.github.com/cn"/>
 <updated>2014-04-01T00:00:14+08:00</updated>
 <id>http://williamlfang.github.com/cn</id>
 <author>
   <name>william</name>
   <email>william.lian.fang@gmail.com</email>
 </author>

 
 <entry>
   <title>简历技术派</title>
   <link href="http://williamlfang.github.com/cn/2014/03/31/jian-li-ji-shu-pai/"/>
   <updated>2014-03-31T00:00:00+08:00</updated>
   <id>http://williamlfang.github.com/cn/2014/03/31/jian-li-ji-shu-pai</id>
   <content type="html">&lt;p&gt;找工作至少要准备两种以上格式的简历，注意，这里值得不是中文或者英文的，而是具体的简历呈现的格式。&lt;/p&gt;

&lt;p&gt;我非常不推荐使用 Word 来编辑简历，主要是因为&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;MS 经常对 office 进行更新，动不动的我们就得升级，可能你电脑的office已经升级到了 2013 年，可是你老板公司却只能使用 XP 的，这样HR可能就无法查收使用 word 制作的简历了&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;最要命的，我们经常发现本来已经调好各种格式的word简历，却在另外的一台电脑里莫名其妙的出现格式错误，与原来设计的完全不同，甚至有时还会出现乱码的情况。所以，找工作，远离MS啊。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section&quot;&gt;简历的两种境界&lt;/h2&gt;

&lt;p&gt;我这里推荐使用两种文件格式来制作简历。&lt;/p&gt;

&lt;!-- more --&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;首选当然是 LaTeX 啦。这个可是说是制作简历的神器，页面非常的美观，而且最后得到的 pdf 格式的文件通杀所有系统，能够完美无差的在不同的电脑、系统、环境中查看。再者，使用 LaTeX 本身也是一件拉风的事情，当 HR 在经过一整天的 Word 那丑陋而又抽风的格调后，相信第一眼看到完美的 pdf 会神清气爽的。（当然，简历最重要的要有「料」，如果你的能力与阅历本来就不甚了了，那可能真的埋踏了神器）。&lt;/p&gt;

    &lt;p&gt;前段时间我使用 LaTeX 制作了一个带有时间标签的&lt;a href=&quot;http://williamlfang.qiniudn.com/cv/william_cn.pdf&quot;&gt;简历&lt;/a&gt;，里面可以对工作经历做时间上的排序，方便 HR 查看。颜色可以按照个人偏好选择。我使用的是金桔色，代表着「青春与活力」，希望自己在将来的工作中也「满腹热血」而非「满腹牢骚」，纵然「满腹经论」，好歹也得努力工作人家人「满脸幸福」。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;其次，我们可以尝试制作一个应用 Html5 技术的网页版简历，生成的文档可是直接加入到 Email 正文。现在好多公司由于保密问题，通常不接受带附件的简历，那么，有用一款可以直接在邮件中文里显示的简历页面，将使你受益颇多。而且，现在的 Html5 技术已经非常成熟，可以制作一个异常漂亮的简历页面，里面还可以提供相应的链接，使得单页的简历在内容上得到扩展，增加你的筹码。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;html5-&quot;&gt;Html5 制作简历&lt;/h2&gt;

&lt;p&gt;我原来本是打算直接用先前制作好的 pdf 格式来转成 Html 代码（这个可以使用 &lt;strong&gt;pdf2htmlEX&lt;/strong&gt; 来实现，详见我的帖子，&lt;a href=&quot;http://williamlfang.github.io/cn/2014/03/30/pdf-zhuan-html-de-fang-fa/&quot;&gt;PDF转HTML的方法&lt;/a&gt;）。可是最后发现， 如果是直接将代码拷贝到邮件正文，根本就不可能被编译成 html（我在 Linux 系统下使用 Thunderbird）。因此，也就死了这条贪图便捷的心。还是乖乖的动手写代码吧。&lt;/p&gt;

&lt;p&gt;思路还是蛮简单的，就是将 Html5 的代码全部放在一个邮件的文档里面。如果有外部链接，如图片、文件、音频等，这可以使用超链接的方式插入。全部代码包括几部分&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;表头部分：用于显示网页标题。&lt;/p&gt;

    &lt;pre&gt;&lt;code&gt;  &amp;lt;!DOCTYPE html&amp;gt;
  &amp;lt;!--[if lt IE 7]&amp;gt;      &amp;lt;html class=&quot;no-js lt-ie9 lt-ie8 lt-ie7&quot;&amp;gt; &amp;lt;![endif]--&amp;gt;
  &amp;lt;!--[if IE 7]&amp;gt;         &amp;lt;html class=&quot;no-js lt-ie9 lt-ie8&quot;&amp;gt; &amp;lt;![endif]--&amp;gt;
  &amp;lt;!--[if IE 8]&amp;gt;         &amp;lt;html class=&quot;no-js lt-ie9&quot;&amp;gt; &amp;lt;![endif]--&amp;gt;
  &amp;lt;!--[if gt IE 8]&amp;gt;&amp;lt;!--&amp;gt; 
  &amp;lt;html class=&quot;no-js&quot;&amp;gt; &amp;lt;!--&amp;lt;![endif]--&amp;gt;
  &amp;lt;head&amp;gt;
  &amp;lt;meta charset=&quot;utf-8&quot;&amp;gt;
  &amp;lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot;&amp;gt;
  &amp;lt;title&amp;gt;William · 方 莲&amp;lt;/title&amp;gt;  	&amp;lt;!-- &amp;lt;title&amp;gt;My sweet one page CV&amp;lt;/title&amp;gt; --&amp;gt;
  &amp;lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;css&lt;/strong&gt;：使用 &lt;strong&gt;&lt;style type=&quot;text/css&quot;&gt; &lt;/style&gt;&lt;/strong&gt; 引入，主要控制页面格式、相应方式、动画顺序、字体、颜色等。这部分往往是比较难的部分，可以找网上的帖子来做参考，省去一笔不必要的时间浪费。&lt;/p&gt;

    &lt;p&gt;比如，我通常会选择在简历中添加 Google+、Facebook、新浪微薄等链接，方便 HR 直接跳转到更多的咨询。这点在传统的纸质简历中是难以想象到的。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a href=&quot;/cn/assets/images/r-figures/2014-03-31-jian-li-ji-shu-pai/cn-ex01.png&quot;&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-03-31-jian-li-ji-shu-pai/cn-ex01.png&quot; alt=&quot;cn-ex01&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;再举个例子，我使用带有时间轴的标签，这个可以通过一下命令完成：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  .time {
  width: 20%;
  display: inline;
  float: left;
  text-align: right;
  width: 70px;
  margin-right: 20px;
  font-size: 15px;                              /* -------------   time font size --------------------*/
  font-weight: bold;
  }
  
  .timeline {
  width: 80%;
  display: inline-block;
  }
  .timeline .element {
  margin: 0;
  padding: 0 0 10px 20px;
  border-left: 4px solid #4ec5e0;             /* 时间轴的宽度， 颜色: border-left: 4px solid #f1f1f1;   */
  -webkit-transition: 1s ease;
  -moz-transition: 1s ease;
  -o-transition: 1s ease;
  transition: 1s ease;
  }
  /*
  .timeline .element h3 {
  display: inline-block;
  }
  */
  .timeline .element:hover {
  border-left: 4px solid #c2d9a1;
  cursor: pointer;
  }
  .timeline .element:hover {
  -webkit-transition: 1s ease;
  -moz-transition: 1s ease;
  -o-transition: 1s ease;
  transition: 1s ease;
  }
  .timeline .element::before {
   content: &quot; &quot;;
  color: white;
  background: white;
  display: inline-block;
  margin-left: -29px;
  position: absolute;
  padding: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
  height: 12px;
  width: 12px;
  -webkit-border-radius: 6px;
  -moz-border-radius: 6px;
  -ms-border-radius: 6px;
  -o-border-radius: 6px;
  border-radius: 6px;
  }
  .timeline .element ul {
  list-style-type: square;
  padding-left: 15px;
  margin: 0;
  }
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;section-1&quot;&gt;快来快来看一看&lt;/h2&gt;

&lt;p&gt;得到的现实效果如下&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/cn/assets/images/r-figures/2014-03-31-jian-li-ji-shu-pai/cn-ex02.png&quot;&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-03-31-jian-li-ji-shu-pai/cn-ex02.png&quot; alt=&quot;cn-ex02&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;这样，我们在给 HR 发送简历的时候，就可以使用 Thunderbird 的「插入 Html 」功能来实现网页版本的简历申请了。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/cn/assets/images/r-figures/2014-03-31-jian-li-ji-shu-pai/cn-ex03.png&quot;&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-03-31-jian-li-ji-shu-pai/cn-ex03.png&quot; alt=&quot;cn-ex03&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/cn/assets/images/r-figures/2014-03-31-jian-li-ji-shu-pai/cn-ex04.png&quot;&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-03-31-jian-li-ji-shu-pai/cn-ex04.png&quot; alt=&quot;cn-ex04&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/cn/assets/images/r-figures/2014-03-31-jian-li-ji-shu-pai/cn-ex05.png&quot;&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-03-31-jian-li-ji-shu-pai/cn-ex04.png&quot; alt=&quot;cn-ex05&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

<img src="http://img.tongji.linezing.com/3379661/tongji.gif" border="0" /></content>
 </entry>
 
 <entry>
   <title>PDF转HTML的方法</title>
   <link href="http://williamlfang.github.com/cn/2014/03/30/pdf-zhuan-html-de-fang-fa/"/>
   <updated>2014-03-30T00:00:00+08:00</updated>
   <id>http://williamlfang.github.com/cn/2014/03/30/pdf-zhuan-html-de-fang-fa</id>
   <content type="html">&lt;p&gt;今天本来是想要给公司人力资源部发送简历，顺便做了一些调改，是以附件的PDF格式呈送的。可是那边的却通知我说公司有规定，不能在邮件里直接打开附件（有时甚至会直接被视为病毒删除掉）。因此，我只好另寻方法，既能够满足我使用&lt;em&gt;LaTeX&lt;/em&gt;制作简历的极客范，又能符合公司的客观规定。&lt;/p&gt;

&lt;p&gt;一来我现在使用的系统是&lt;strong&gt;Linux Mint&lt;/strong&gt;，不存在说需要使用&lt;em&gt;Word&lt;/em&gt;制作简历的可能性，而且如果真的制作了，不也是一样需要以附件形式发送嘛——如果你非得使用Word制作简历，那么到时候就只能以「复制、粘贴」的方法写到邮件正文中。可是如此以来，所有的格式都消失了，而且由于&lt;strong&gt;Email&lt;/strong&gt;采用&lt;em&gt;Markup&lt;/em&gt;格式，到时候Word复制粘贴出来的文本几乎无法被正常显示，更不要说让挑剔的人力部来阅读邮件了。二者，我前面也提到了，我极度使用一切与&lt;strong&gt;TeX&lt;/strong&gt;相关的技术，这包括在&lt;strong&gt;R&lt;/strong&gt;中使用&lt;em&gt;knitr&lt;/em&gt;，在&lt;em&gt;Html&lt;/em&gt;网页中显示由&lt;strong&gt;LaTeX&lt;/strong&gt;生成的&lt;em&gt;pdf&lt;/em&gt;文档，使用&lt;em&gt;Pandoc&lt;/em&gt;转化&lt;em&gt;markdown&lt;/em&gt;为pdf输出等等。&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;section&quot;&gt;解决思路&lt;/h2&gt;

&lt;p&gt;不怕有问题，我们需要相信强大的黑客社区与开源社区。针对我今天遇到的这个问题，其实已经有人早早就提出来了，而且还写了一个小程序来实现。&lt;/p&gt;

&lt;p&gt;其实想法很简单：既然不让使用附件传送PDF格式的简历，那么，我们现在换一种思路，将其转化成&lt;em&gt;markup&lt;/em&gt;语言，然后在邮件正文就能够显示出来符合原来文件排版的简历内容了。这个问题放大了看，其实就是如何在浏览器中显示PDF文档。原来的解决思路是通过浏览器自带的阅读器来打开该格式的文档，比如Chrome等。然而，这对系统运行难免带来压力，有些时候Chrome打开一个PDF文件非常的卡，非常的慢。&lt;/p&gt;

&lt;p&gt;由&lt;a href=&quot;http://www.cse.ust.hk/~luwang/&quot;&gt;Lu Wang&lt;/a&gt;开发的这个&lt;a href=&quot;https://github.com/coolwanglu/pdf2htmlEX&quot;&gt;&lt;strong&gt;pdf2htmlEX&lt;/strong&gt;&lt;/a&gt;正好解决了这个问题，实现了将PDF文件&lt;strong&gt;精确、无差&lt;/strong&gt;的转化为相应的HTML文件，整个过程支持&lt;strong&gt;LaTeX&lt;/strong&gt;语法，尤其适用与包含了&lt;strong&gt;LaTeX&lt;/strong&gt;数学公式的文档。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;首先，我们经过&lt;strong&gt;LaTeX&lt;/strong&gt;编译后得到了一个pdf简历。这里面既可以包括文字、图形、照片，又可以包括诸如数学公式、特殊符号在内的各种格式。&lt;/li&gt;
  &lt;li&gt;然后，使用&lt;em&gt;pdf2htmlEX&lt;/em&gt;，实现「无缝对接」，得到了一个html文件。&lt;/li&gt;
  &lt;li&gt;之后，我们便可以像对待其他html格式文件一样的，乐趣所需。&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-1&quot;&gt;安装方法&lt;/h2&gt;

&lt;p&gt;在Linux中有两种安装方法，一种是直接在终端输入命令语句安装，另一种是自己按照各种依赖包一路安装到底。前者简单适用，后者过于复杂。我这里介绍如何使用前一种方法安装&lt;strong&gt;pdf2htmlEX&lt;/strong&gt;。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo apt-add-repository ppa:coolwanglu/pdf2htmlex
sudo apt-get update
sudo apt-get install pdf2htmlex
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;安装成功后，我们可以查看一下相应的版本&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo pdfhtmlex --version
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;同时，可以查看使用手册&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;pdf2htmlEX –help
man pdf2htmlEX
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href=&quot;/cn/assets/images/r-figures/2014-03-30-pdf-zhuan-html-de-fang-fa/pdf2htmlEX01.png&quot;&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-03-30-pdf-zhuan-html-de-fang-fa/pdf2htmlEX01.png&quot; alt=&quot;pdf2htmlEX01&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;section-2&quot;&gt;使用&lt;/h2&gt;

&lt;p&gt;现在，「万事具备」，只需要一个命令就可以实现：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;pdf2htmlEX “test.pdf”
&lt;/code&gt;&lt;/pre&gt;

<img src="http://img.tongji.linezing.com/3379661/tongji.gif" border="0" /></content>
 </entry>
 
 <entry>
   <title>Page 183 184</title>
   <link href="http://williamlfang.github.com/cn/2014/03/27/page-183-184/"/>
   <updated>2014-03-27T00:00:00+08:00</updated>
   <id>http://williamlfang.github.com/cn/2014/03/27/page-183-184</id>
   <content type="html">&lt;p&gt;假定短期利率在风险中性测度下（等价鞅测度）服从以下随机过程
$$
\begin{align}
 dr_t &amp;amp;= \theta dt + \sigma dW_t &lt;br /&gt;
 \Rightarrow
 \int&lt;em&gt;{s}^{t} dr_t &amp;amp;= \int&lt;/em&gt;{s}^{t} \theta dt + \int&lt;em&gt;{s}^{t}  \sigma dW_t &lt;br /&gt;
  \Rightarrow
  r(t) &amp;amp;= r(s) + \theta (t-s) + \sigma  \int&lt;/em&gt;{s}^{t}  dW_t &lt;br /&gt;
\end{align}
$$&lt;/p&gt;

&lt;p&gt;则在同样的等价鞅测度下，零息票债券的价格为
$$
\begin{align}
 P(t,T) &amp;amp;= E^{Q}\bigg[ e^{ - \int_{t}^{T} r(u) du } \bigg| \mathcal{F}_t \bigg]
\end{align}
$$&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;同时，我们令 $X(t,T)$ 为一个有关短期利率的线性关系，我们在前面提过，短期利率 $\boxed{r(t)  = \cdots + \sigma  \int&lt;em&gt;{s}^{t}  dW_t}$ 是一个服从正太分布的变量（从布朗运动的正太分布特征得到），因而 $X(t,T)$ 也是一个服从正太分布的随机变量。
$$
\begin{align*}
 X(t,T) &amp;amp;= \int&lt;/em&gt;{t}^{T} r(u) du = \int&lt;em&gt;{t}^{T} r(t) du + \int&lt;/em&gt;{t}^{T} \theta (u-t) du + \int&lt;em&gt;{t}^{T}  \sigma du \int&lt;/em&gt;{t}^{u}  dW&lt;em&gt;\epsilon &lt;br /&gt;
 &amp;amp;= r(t)(T-t) + \frac{\theta}{2}(T-t)^2 + \int&lt;/em&gt;{t}^{T}  \sigma du \int&lt;em&gt;{t}^{u}  dW&lt;/em&gt;\epsilon &lt;br /&gt;
 \Rightarrow
 E\bigg[ X(t,T) \bigg| \mathcal{F}&lt;em&gt;t \bigg]
 &amp;amp;= r(t)(T-t) + \frac{\theta}{2}(T-t)^2 + \int&lt;/em&gt;{t}^{T}  \sigma du \underbrace{ E\bigg[  \int&lt;em&gt;{t}^{u}  dW&lt;/em&gt;\epsilon}&lt;em&gt;{0}  \bigg] &lt;br /&gt;
 &amp;amp;= r(t)(T-t) + \frac{\theta}{2}(T-t)^2  &lt;br /&gt;
 \Rightarrow
 Var\bigg[ X(t,T) \bigg| \mathcal{F}_t \bigg]
 &amp;amp;= \sigma^2 E\bigg[ \int&lt;/em&gt;{t}^{T} du 
      \bigg( \int&lt;em&gt;{t}^{u} dW&lt;/em&gt;{\epsilon} \cdot   \int&lt;em&gt;{t}^{v} dW&lt;/em&gt;{\epsilon}  \bigg) 
      \int&lt;em&gt;{t}^{T} dv \bigg| \mathcal{F}_t \bigg] &lt;br /&gt;
  &amp;amp;= \sigma^2 \int&lt;/em&gt;{t}^{T} du \int&lt;em&gt;{t}^{\min{u,v}} d\epsilon  \int&lt;/em&gt;{t}^{T} dv &lt;br /&gt;
  &amp;amp;= 2 \sigma^2 \int&lt;em&gt;{t}^{v} (u-t) du \int&lt;/em&gt;{t}^{T} dv &lt;br /&gt;
  &amp;amp;= 2 \sigma^2 \int&lt;em&gt;{t}^{T} \bigg( \frac{1}{2} u^2 - u t \bigg)\bigg|_t^v dv  &lt;br /&gt;
  &amp;amp;= 2 \sigma^2 \int&lt;/em&gt;{t}^{T} \bigg( \frac{1}{2} v^2 - vt + \frac{1}{2} t^2 \bigg) dv &lt;br /&gt;
  &amp;amp;= \sigma^2 \int_{t}^{T} (v-t)^2 dv &lt;br /&gt;
  &amp;amp;= \frac{\sigma^2}{3} (v-t)^3\bigg|_t^T &lt;br /&gt;
  &amp;amp;= \frac{\sigma^2}{3} (T-t)^3 &lt;br /&gt;
  \Rightarrow
  X(t,T) &amp;amp;\sim \mathcal{N}\bigg( r(t)(T-t) + \frac{\theta}{2}(T-t)^2, \frac{\sigma^2}{3} (T-t)^3 \bigg)
\end{align*}
$$&lt;/p&gt;

&lt;p&gt;我们可以利用正太分布函数的矩阵生成函数来推导债券价格的公式。
$$
\begin{align}
 P(t,T) &amp;amp;= E^{Q}\bigg[ e^{ - X(t,T) } \bigg| \mathcal{F}_t \bigg] &lt;br /&gt;
 &amp;amp;= e^{ -\mu_X + \frac{1}{2} \sigma_X^2} &lt;br /&gt;
 &amp;amp;= e^{ -r(t)(T-t) - \frac{\theta}{2}(T-t)^2 + \frac{\sigma^2}{6} (T-t)^3 } &lt;br /&gt;
 &amp;amp;= A(t,T) e^{ -B(t,T) r(t) } &lt;br /&gt;
 A(t,T)  &amp;amp;= e^{ - \frac{\theta}{2}(T-t)^2 + \frac{\sigma^2}{6} (T-t)^3  } &lt;br /&gt;
 B(t,T)  &amp;amp;= (T-t)
\end{align}
$$&lt;/p&gt;

&lt;p&gt;下面我们来推导远期利率的公式。&lt;/p&gt;

&lt;p&gt;$$
\begin{align}
 f(t,T) &amp;amp;= -\frac{\partial \ln P(t,T)}{ \partial T} &lt;br /&gt;
 &amp;amp;= r_t + \theta(T-t) - \frac{\sigma^2}{2} (T-t)^2
\end{align}
$$
根据 &lt;strong&gt;Ito formula&lt;/strong&gt;，有
$$
\begin{align}
 df(t,T) &amp;amp;= \underbrace{f’&lt;em&gt;t}&lt;/em&gt;{-\theta + \sigma^2(T-t)} dt + \underbrace{f’&lt;em&gt;{r}}&lt;/em&gt;{1} dr_t  + \frac{1}{2} \underbrace{f’‘&lt;em&gt;{rr}}&lt;/em&gt;{0} dr_tdr_t  &lt;br /&gt;
 &amp;amp;= \bigg[ -\theta + \sigma^2(T-t) \bigg] dt + \bigg( \theta dt + \sigma dW_t \bigg) &lt;br /&gt;
 &amp;amp;= \boxed{
   \sigma^2(T-t) dt +  \sigma dW_t
 }
\end{align}
$$&lt;/p&gt;

&lt;p&gt;从以上关系可以看到，远期利率的漂移项依赖于短期利率的瞬时波动项，即$\mu_{f(t,T)} = \sigma^2(T-t)$，这个是典型的具有 &lt;strong&gt;HJM&lt;/strong&gt; 模型特征。我们将在下一回细解。&lt;/p&gt;
<img src="http://img.tongji.linezing.com/3379661/tongji.gif" border="0" /></content>
 </entry>
 
 <entry>
   <title>远期利率与互换利率</title>
   <link href="http://williamlfang.github.com/cn/2014/03/26/yuan-qi-li-lv-yu-hu-huan-li-lv/"/>
   <updated>2014-03-26T00:00:00+08:00</updated>
   <id>http://williamlfang.github.com/cn/2014/03/26/yuan-qi-li-lv-yu-hu-huan-li-lv</id>
   <content type="html">&lt;p&gt;下面我们来推导远期利率与互换利率。这两个利率变量常常在金融建模中有重要的作用。&lt;/p&gt;

&lt;h2 id=&quot;fra&quot;&gt;远期利率互换(FRA)&lt;/h2&gt;

&lt;p&gt;远期利率互换（Forward Rate Agreement）指的是这样一种金融合约，$FRA(t; T, S)$:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;在 $t$ 时期确定的；&lt;/li&gt;
  &lt;li&gt;到 $T$ 以事先约定的支付金额 $K$;&lt;/li&gt;
  &lt;li&gt;交割到期日为 $S$ 的债券。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;其合约价值为
$$
\begin{align}
 V_{FRA} &amp;amp;= N P(t, S) \tau(T, S) \big[ K- L(T, S) \big], \label{value-fra}
\end{align}
$$
其中，$\tau(T,S)$ 表示在两个时期的时间差，通常按照年为单位计算。$L(T,S)$ 是简单复合利率，通常指的是&lt;strong&gt;LIBOR&lt;/strong&gt;。下面我们来求得远期即期利率$F(t;T,S)$。&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;由式子$\eqref{value-fra}$展开
$$
\begin{align}
 V_{FRA} &amp;amp;= N \Big[ P(t, S) \tau(T, S)  K - P(t, S) \tau(T, S)  L(T, S) \Big].
\end{align}
$$
根据无套利条件，我们有以下关系成立(详细推导见：Filipovic: Term Structure Model: A Graduate Course)
$$
\begin{align}
 P(t,S) &amp;amp;= P(t,T) P(T,S)
\end{align}
$$&lt;/p&gt;

&lt;p&gt;同时,我们有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[

\begin{align}
 L(T,S) :=&amp; \frac{1}{\tau(T,S)}\Big( \frac{1}{P(T,S)} - 1 \Big) \\
 \tau(T,S)L(T,S)  =&amp; \frac{1}{P(T,S)} - 1 \\ 
\end{align}
 %]]&gt;&lt;/script&gt;

&lt;p&gt;因此，
$$
\begin{align}
 V_{FRA} &amp;amp;= N \Big[ P(t, S) \tau(T, S)  K - P(t, S) \tau(T, S)  L(T, S) \Big] &lt;br /&gt;
   &amp;amp;= N \Big[ P(t, S) \tau(T, S)  K - P(t, S) \big(\frac{1}{P(T,S)} - 1 \big) \Big] &lt;br /&gt;
   &amp;amp;= N  \Big[ P(t, S) \tau(T, S)  K -   \big(\frac{P(t, S)}{P(T,S)} - P(t, S) \big) \Big]  &lt;br /&gt;
   &amp;amp;= N  \Big[ P(t, S) \tau(T, S)  K -   P(t,T)  + P(t, S)  \Big] 
\end{align}
$$&lt;/p&gt;

&lt;h2 id=&quot;section&quot;&gt;远期即期利率&lt;/h2&gt;

&lt;p&gt;在无套利的要求下，远期即期利率（Future spot rate）必需满足一个「公平价格」的原则，即使得远期利率协议的价值为零的利率水平，则
$$
\begin{align}
 V_{FRA} &amp;amp;= 0 = N  \Big[ P(t, S) \tau(T, S)  F(t;T,S) -   P(t,T)  + P(t, S)  \Big] &lt;br /&gt;
 \Rightarrow 
 F(t;T,S) &amp;amp;= \frac{1}{\tau(T,S)} \bigg[ \frac{P(t,T)}{P(t,S)} - 1 \bigg].
\end{align}
$$&lt;/p&gt;

&lt;h2 id=&quot;irs&quot;&gt;利率互换（IRS）&lt;/h2&gt;

&lt;p&gt;下面我们来介绍另外一种利率产品：利率互换（Interest Rate Swap,IRS):&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;固定支付：约定在未来的一个时间段内按照合同约定的比例支付，假定该水平值为 $K$&lt;/li&gt;
  &lt;li&gt;浮动利率：合同的另一方则需要根据合同拟采用的浮动利率水平来做对冲支付，一般而言，该浮动利率为短期简单复利的&lt;strong&gt;LIBOR&lt;/strong&gt;, $L(T&lt;em&gt;{i-1}, T&lt;/em&gt;{i})$。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;我们记该时间段为 $\mathcal{T} = { T&lt;em&gt;{\alpha}, T&lt;/em&gt;{\alpha+1},\cdots,T&lt;em&gt;{\beta - 1}, T&lt;/em&gt;{\beta}}$，$\tau&lt;em&gt;{i} = \tau(T&lt;/em&gt;{i-1}, T&lt;em&gt;{i}),$ 且有 $\mathcal{\tau} = { \tau&lt;/em&gt;{\alpha + 1}, \tau&lt;em&gt;{\alpha+2},\cdots,\tau&lt;/em&gt;{\beta - 1}, \tau_{\beta}}$ 。&lt;/p&gt;

&lt;p&gt;则我们可以得到 IRS 的合约价值为
$$
\begin{align}
 V&lt;em&gt;{IRS} &amp;amp;= \sum&lt;/em&gt;{i=\alpha+1}^{\beta} D(t,T_i) N \tau_i \bigg[ K - L(T&lt;em&gt;{i-1}, T&lt;/em&gt;{i}) \bigg] \label{value-irs}
\end{align}
$$&lt;/p&gt;

&lt;p&gt;对比 $\eqref{value-fra}$ 和 $\eqref{value-irs}$，我们不难发现，利率互换可以看作来一系列的远期利率协议的总和，即
$$
\begin{align}
  V&lt;em&gt;{IRS} &amp;amp;= \sum&lt;/em&gt;{i=\alpha+1}^{\beta} V&lt;em&gt;{FRA}  &lt;br /&gt;
  &amp;amp;= \sum&lt;/em&gt;{i=\alpha+1}^{\beta} N P(t, T_i) \tau_i \big[ K- F(t;T&lt;em&gt;{i-1},T&lt;/em&gt;{i}) \big] &lt;br /&gt;
  &amp;amp;= N \sum&lt;em&gt;{i=\alpha+1}^{\beta}  P(t, T_i) \tau_i  K - N \boxed{ \sum&lt;/em&gt;{i=\alpha+1}^{\beta} P(t, T_i) \tau_i F(t;T&lt;em&gt;{i-1},T&lt;/em&gt;{i}) }.
\end{align}
$$&lt;/p&gt;

&lt;p&gt;对于方框内的式子，我们可以做如下运算
$$
\begin{align&lt;em&gt;}
&amp;amp; \boxed{ \sum_{i=\alpha+1}^{\beta}  P(t, T_i) \tau_i F(t;T_{i-1},T_{i})  }  &lt;br /&gt;
 =&amp;amp; \sum_{i=\alpha+1}^{\beta}  P(t, T_i) \tau(T_{i-1},T_{i}) \cdot \frac{1}{\tau(T_{i-1},T_{i})} \bigg[ \frac{P(t,T_{i-1})}{P(t,T_{i})} - 1 \bigg] &lt;br /&gt;
 =&amp;amp; \sum_{i=\alpha+1}^{\beta} \bigg[ P(t,T_{i-1}) - P(t,T_{i}) \bigg]  &lt;br /&gt;
 =&amp;amp;  P(t,T_{\alpha}) - P(t,T_{\beta})
\end{align&lt;/em&gt;}
$$&lt;/p&gt;

&lt;p&gt;从而，
$$
\begin{align}
 V&lt;em&gt;{IRS} &amp;amp;=  N \sum&lt;/em&gt;{i=\alpha+1}^{\beta}  P(t, T_i) \tau_i  K - N \bigg( P(t,T&lt;em&gt;{\alpha}) - P(t,T&lt;/em&gt;{\beta}) \bigg)
\end{align}
$$&lt;/p&gt;

&lt;h2 id=&quot;swap-rate&quot;&gt;互换利率（Swap Rate）&lt;/h2&gt;

&lt;p&gt;同理，为来得到无套利条件，我们要求互换利率使得该利率互换的价值为零，即
$$
\begin{align}
 V&lt;em&gt;{IRS} &amp;amp;= 0 = N \sum&lt;/em&gt;{i=\alpha+1}^{\beta}  P(t, T_i) \tau_i   S&lt;em&gt;{\alpha, \beta} (t)  - N \bigg( P(t,T&lt;/em&gt;{\alpha}) - P(t,T&lt;em&gt;{\beta}) \bigg) &lt;br /&gt;
 \Rightarrow 
 S&lt;/em&gt;{\alpha, \beta} (t) &amp;amp;= \frac{ P(t,T&lt;em&gt;{\alpha}) - P(t,T&lt;/em&gt;{\beta}) }{ \sum_{i=\alpha+1}^{\beta}  P(t, T_i) \tau_i }
 \end{align}
$$&lt;/p&gt;

&lt;p&gt;对此，我们可以这样理解：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;首先，投资者为了对冲未来利率不确定所带来的影响，要求在未来的某个时间段内以固定的收益 $P(t,T&lt;em&gt;{\alpha})$ 提前买入债券，而将在更远的未来 $T&lt;/em&gt;{\beta}$ 抛售手里的债券，价值为 $P(t,T&lt;em&gt;{\beta})$，其总和的盈余收益为 $P(t,T&lt;/em&gt;{\alpha}) - P(t,T_{\beta})$。&lt;/li&gt;
  &lt;li&gt;在合约期间，投资者放弃的机会成本总共为 $\sum_{i=\alpha+1}^{\beta}  P(t, T_i) \tau_i$。&lt;/li&gt;
  &lt;li&gt;因此，在满足市场无套利的条件下，互换利率因该使得该投资策略的超额收益率是零，即该投掷策略的收益与互换利率持平，是故
$$
\begin{align}
 S&lt;em&gt;{\alpha, \beta} (t) &amp;amp;= \frac{ P(t,T&lt;/em&gt;{\alpha}) - P(t,T&lt;em&gt;{\beta}) }{ \sum&lt;/em&gt;{i=\alpha+1}^{\beta}  P(t, T_i) \tau_i   }
 \end{align}
$$&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-1&quot;&gt;远期即期利率与远期互换利率的关系&lt;/h2&gt;

&lt;p&gt;我们知道任一两个债券价格可以通过远期即期利率产生联系，例如
$$
\begin{align}
 \frac{P(t,T&lt;em&gt;{k})}{P(t,T&lt;/em&gt;{\alpha})}
 &amp;amp;= \frac{P(t,T&lt;em&gt;{\alpha + 1})}{P(t,T&lt;/em&gt;{\alpha})} \cdot \frac{P(t,T&lt;em&gt;{\alpha + 2})}{P(t,T&lt;/em&gt;{\alpha + 1})} \cdots \frac{P(t,T&lt;em&gt;{\beta})}{P(t,T&lt;/em&gt;{\beta - 1})}  &lt;br /&gt;
 &amp;amp;= \prod&lt;em&gt;{j=\alpha+1}^{k} \frac{1}{1 + \tau_j F(t;T&lt;/em&gt;{j-1}, T_j)}
\end{align}
$$&lt;/p&gt;

&lt;p&gt;从而，我们也可以利用这个关系来推导得到远期即期利率与远期互换利率的关系
$$
\begin{align}
 S&lt;em&gt;{\alpha, \beta} (t) &amp;amp;= \frac{ P(t,T&lt;/em&gt;{\alpha}) - P(t,T&lt;em&gt;{\beta}) }{ \sum&lt;/em&gt;{i=\alpha+1}^{\beta}  P(t, T_i) \tau_i  K } &lt;br /&gt;
 &amp;amp;= \frac{ 1 - \frac{P(t,T&lt;em&gt;{\beta})}{P(t,T&lt;/em&gt;{\alpha})} }{ \sum&lt;em&gt;{i=\alpha+1}^{\beta} \tau_i \frac{P(t, T_i) }{ P(t,T&lt;/em&gt;{\alpha}) } }  &lt;br /&gt;
 &amp;amp;= \frac{ 1 - \prod&lt;em&gt;{j=\alpha+1}^{\beta} \frac{1}{1 + \tau_j F(t;T&lt;/em&gt;{j-1}, T_j)} }{ \sum&lt;em&gt;{i=\alpha+1}^{\beta} \tau_i \prod&lt;/em&gt;{j=\alpha+1}^{i} \frac{1}{1 + \tau_j F(t;T_{j-1}, T_j)}  }&lt;br /&gt;
 \end{align}
$$&lt;/p&gt;

<img src="http://img.tongji.linezing.com/3379661/tongji.gif" border="0" /></content>
 </entry>
 
 <entry>
   <title>落得白发苍茫</title>
   <link href="http://williamlfang.github.com/cn/2014/03/17/luo-de-bai-fa-cang-mang/"/>
   <updated>2014-03-17T00:00:00+08:00</updated>
   <id>http://williamlfang.github.com/cn/2014/03/17/luo-de-bai-fa-cang-mang</id>
   <content type="html">&lt;p&gt;不复年少惶惶，落得白发苍茫。&lt;/p&gt;

<img src="http://img.tongji.linezing.com/3379661/tongji.gif" border="0" /></content>
 </entry>
 
 <entry>
   <title>庖丁解牛之 Ito 公式</title>
   <link href="http://williamlfang.github.com/cn/2014/03/16/pao-ding-jie-niu-zhi--ito--gong-shi/"/>
   <updated>2014-03-16T00:00:00+08:00</updated>
   <id>http://williamlfang.github.com/cn/2014/03/16/pao-ding-jie-niu-zhi--ito--gong-shi</id>
   <content type="html">&lt;p&gt;假设股票价格的变化服从以下运动方程（随机微分方程，SDE）：
$$
\begin{align}
 d S_t = \mu S_t dt + \sigma S_t dW_t,
\end{align}
$$
其中 $dW_t$ 是一个（连续的）&lt;strong&gt;Brownian motion&lt;/strong&gt;，$W_t \sim \mathcal{N} (0, t)$。等价的，我们可以得到股票价格变化率：
$$
\begin{align}
 d \ln S_t = \frac{ d S_t }{ S_t } = \mu dt + \sigma dW_t.
\end{align}
$$&lt;/p&gt;

&lt;p&gt;下面我们来推导股票价格 $S_t$ 的动态方程，这主要是使用著名的 &lt;strong&gt;Ito 公式&lt;/strong&gt;。过于理论的东西我在这里不推导了，主要是利用一个简单的例子来说明如何使用 &lt;strong&gt;Ito 公式&lt;/strong&gt; 解 &lt;strong&gt;SDE&lt;/strong&gt; 类问题。&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;ito-&quot;&gt;Ito 公式求解&lt;/h2&gt;

&lt;p&gt;首先，令 $Y_t = ln S_t$，由简单的偏微分求导得到
$$
\begin{align}
\frac{ \partial Y }{ \partial t} &amp;amp;= 0  &lt;br /&gt;
\frac{ \partial Y }{ \partial S} &amp;amp;= \frac{ 1 }{ S }  &lt;br /&gt;
\frac{ \partial^2 Y }{ \partial S^2} &amp;amp;= - \frac{ 1 }{ S^2 }  &lt;br /&gt;
\end{align}
$$
则根据 &lt;strong&gt;Ito 公式&lt;/strong&gt;，我们可以推出以下方程
$$
\begin{align}
 d \ln S_t = d Y_t 
  &amp;amp;= \frac{ \partial Y }{ \partial t} dt + \frac{ \partial Y }{ \partial S} dS_t + \frac{1}{2} \frac{ \partial^2 Y }{ \partial S^2} dS_t dS_t \nonumber&lt;br /&gt;
  &amp;amp;= 0 · dt + \frac{ 1 }{ S_t } dS_t - \frac{1}{2} · \frac{ 1 }{ S_t^2 } dS_t dS_t \nonumber&lt;br /&gt;
  &amp;amp;=  \frac{ 1 }{ S_t } · S_t · (\mu dt + \sigma dW_t) - \frac{1}{2} · \frac{ 1 }{ S_t^2 } · \sigma^2 S_t^2 dt
 \nonumber&lt;br /&gt;
  &amp;amp;= (\mu - \frac{1}{2} \sigma^2) dt + \sigma dW_t. &lt;br /&gt;
\end{align}
$$
两边求积分，得到如下式子
$$
\begin{align}
 \int&lt;em&gt;{0}^{t} d \ln S_u = \int&lt;/em&gt;{0}^{t} d Y_u 
    &amp;amp;= \int&lt;em&gt;{0}^{t}  (\mu - \frac{1}{2} \sigma^2) du + \int&lt;/em&gt;{0}^{t}  \sigma dW_u &lt;br /&gt;
\Rightarrow \ln S_t - \ln S&lt;em&gt;0 = Y_t - Y&lt;/em&gt;0 &amp;amp;= (\mu - \frac{1}{2} \sigma^2) t + \int&lt;em&gt;{0}^{t}  \sigma dW_u.
\end{align}
$$
我们知道，&lt;strong&gt;Brownian Motion&lt;/strong&gt; 表示在一定时间段内随机游走走过的路径，并且如果我们假定在初始阶段为 $W(0)=0$，那么，上面等式的最后一项是
$$
\begin{align}
\int&lt;/em&gt;{0}^{t}  \sigma dW_u &amp;amp;= \sigma (W_t - W_0 ) = \sigma W_t.
\end{align}
$$&lt;/p&gt;

&lt;p&gt;因此，我们有
$$
\begin{align}
 \ln S_t - \ln S&lt;em&gt;0 = Y_t - Y&lt;/em&gt;0 &amp;amp;= (\mu - \frac{1}{2} \sigma^2) t + \sigma W_t \nonumber&lt;br /&gt;
  \Rightarrow Y_t &amp;amp;= Y&lt;em&gt;0 + (\mu - \frac{1}{2} \sigma^2) t + \sigma W_t \nonumber&lt;br /&gt;
 \Rightarrow S_t &amp;amp;= S&lt;/em&gt;0 · \exp{  (\mu - \frac{1}{2} \sigma^2) t + \sigma W_t  }.
\end{align}
$$&lt;/p&gt;

&lt;h2 id=&quot;section&quot;&gt;几何布朗运动&lt;/h2&gt;

&lt;p&gt;我们知道，对于任何一个正态分布做线性转换后依然服从正态分布。由于布朗运动 $W_t \sim \mathcal{N} (0, t)$，则
$$
\begin{align}
  Y_t &amp;amp;= Y&lt;em&gt;0 + (\mu - \frac{1}{2} \sigma^2) t + \sigma W_t \nonumber&lt;br /&gt;
\Rightarrow E[Y_t|Y&lt;/em&gt;0] &amp;amp;= E[ Y&lt;em&gt;0 + (\mu - \frac{1}{2} \sigma^2) t + \sigma W_t] \nonumber&lt;br /&gt;
                       &amp;amp;= Y&lt;/em&gt;0 + (\mu - \frac{1}{2} \sigma^2) t + \underbrace{E[\sigma W_t]}&lt;em&gt;{0} = Y&lt;/em&gt;0 + (\mu - \frac{1}{2} \sigma^2) t &lt;br /&gt;
\Rightarrow Var[Y_t|Y&lt;em&gt;0] &amp;amp;= Var [\sigma W_t] = \sigma^2 Var(Wt) = \sigma^2 ·t \nonumber&lt;br /&gt;
\Rightarrow Y_t &amp;amp;\sim \mathcal{N}(  Y&lt;/em&gt;0 + (\mu - \frac{1}{2} \sigma^2) t, \sigma^2 t  ) \label{gbm_norm}
\end{align} 
$$&lt;/p&gt;

&lt;p&gt;那么，$\ln S_t = Y_t$ 则服从 &lt;strong&gt;正态分布&lt;/strong&gt;，则 $S_t = e^{Y_t}$服从 &lt;em&gt;log-normal disctribution&lt;/em&gt;，即 $\ln S_t \sim \mathcal{N} (E[S_t], Var[S_t])$.&lt;/p&gt;

&lt;p&gt;下面我们来推导 $S_t$ 的分布特征。&lt;/p&gt;

&lt;h3 id=&quot;moment-generation-function&quot;&gt;Moment Generation Function&lt;/h3&gt;

&lt;p&gt;我们知道，对于对任何一个随机变量建模，往往需要假设该变量服从某一类随机过程，而这个随机过程由分布函数（distribution function）给定。可是，有些时候，我们并不一定需要知道整个分布函数的具体形式，而只是关注该随机变量的几个「统计特征」，如一阶矩、二阶矩等。下面要介绍的「矩条件生成函数」就针对这种情况提出的。随机变量的矩条件可以在 &lt;strong&gt;Moment Generation Function&lt;/strong&gt; (MGF) 十分方便的推导出来。比如，对于正态分布，我们只需要知道一阶矩和二阶矩条件就可以对变量做统计推断（method of moment, MM，还有更一般的 GMM）。&lt;/p&gt;

&lt;p&gt;对于一个&lt;strong&gt;可测空间&lt;/strong&gt; $(\Omega, \mathcal{F}, P)$，随机变量 $X \in \sigma(\mathcal{F})$ 的 MGF 定义为
$$
\begin{align}
 M&lt;em&gt;{X}(\tau) &amp;amp;= E[ e^{x\tau}] = \int&lt;/em&gt;{\Omega} e^{x(\omega)\tau} dP(\omega)
\end{align}
$$
其任一 $m-$ 阶的矩公式可以对 $\tau$ 在 $\tau = 0$ 处求 $m$ 次导数得到
$$
\begin{align}
  \frac{\partial M&lt;em&gt;{X}(\tau)}{\partial \tau}|&lt;/em&gt;{\tau = 0} 
  &amp;amp;=   \frac{\partial}{\partial \tau} E[ e^{x\tau}] |&lt;em&gt;{\tau = 0}&lt;br /&gt;
  =  E[ x · e^{x\tau}] |&lt;/em&gt;{\tau = 0}    \nonumber&lt;br /&gt;
  &amp;amp;= E[x] &lt;br /&gt;
   \frac{\partial ^2 M&lt;em&gt;{X}(\tau)}{\partial \tau ^2 }|&lt;/em&gt;{\tau = 0} 
 &amp;amp;= E[x^2] &lt;br /&gt;
 \frac{\partial ^m M&lt;em&gt;{X}(\tau)}{\partial \tau ^m }|&lt;/em&gt;{\tau = 0} 
 &amp;amp;= E[x^m]
\end{align}
$$
特别的，对于一个正态分布，$X \sim \mathcal{N}(\mu, \sigma^2)$，有
$$
\begin{align}
  M_{X}(\tau) &amp;amp;= E[ e^{x\tau}] = \exp{ \mu \tau + \frac{1}{2} \sigma^2 \tau^2 }
\end{align} &lt;br /&gt;
$$&lt;/p&gt;

&lt;h3 id=&quot;section-1&quot;&gt;期望与方差&lt;/h3&gt;

&lt;p&gt;这个特征对于求一个「对数正态分布」十分有用。由$\eqref{gbm_norm}$
$$
\begin{align}
  Y_t &amp;amp;\sim \mathcal{N}(  Y&lt;em&gt;0 + (\mu - \frac{1}{2} \sigma^2) t, \sigma^2 t  ) 
\end{align}
$$
则其 MGF 为
$$
\begin{align}
 M&lt;/em&gt;{Y}(\tau) &amp;amp;= E[e^{y\tau}] = \exp{ \tilde{\mu} \tau + \frac{1}{2} \tilde{\sigma}^2 \tau^2 },
\end{align}
$$
其中，$\tilde{\mu} = Y_0 + (\mu - \frac{1}{2} \sigma^2) t$，$\tilde{\sigma}^2= \sigma ^2 t$ .&lt;/p&gt;

&lt;p&gt;因此，我们可以得到如下公式
$$
 \begin{align}
  E[S^{\tau}] &amp;amp;=  E[e^{y\tau}]  = \exp{ \tilde{\mu} \tau + \frac{1}{2} \tilde{\sigma}^2 \tau^2 }
 \end{align}
$$&lt;/p&gt;

&lt;p&gt;即，期望可以表示为
$$
 \begin{align}
  E[S_t] &amp;amp;=  E[e^{y\tau}]|&lt;em&gt;{\tau = 1}  = \exp{ \tilde{\mu}  + \frac{1}{2} \tilde{\sigma}^2  }  \nonumber&lt;br /&gt;
        &amp;amp;= \exp{ Y&lt;/em&gt;0 + (\mu - \frac{1}{2} \sigma^2) t + \frac{1}{2} \sigma^2 t  } \nonumber&lt;br /&gt;
        &amp;amp;= S_0 · e^{\mu t } &lt;br /&gt;
\end{align}
$$&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[

 \begin{align}
  E[S^2] &amp;= E[e^{y\tau}]|_{\tau = 2}  = \exp\{ 2 \tilde{\mu}  + 2 \tilde{\sigma}^2  \} \nonumber\\
  &amp;= \exp\{ 2 [Y_0 + (\mu - \frac{1}{2} \sigma^2) t ] + 2 \sigma^2 t \}   \nonumber\\
  &amp;= S_0^2 · \exp\{ 2 \mu t + \sigma^2 t\}
 \end{align}
 %]]&gt;&lt;/script&gt;

&lt;p&gt;因此，$S_t$ 的方差可以表示为
$$
 \begin{align}
  Var[S_t] 
  &amp;amp;=   E[S^2] -  ( E[S] )^2 \nonumber&lt;br /&gt;
  &amp;amp;= S&lt;em&gt;0^2 · \exp{ 2 \mu t + \sigma^2 t} - S&lt;/em&gt;0^2 · \exp{ 2 \mu t } \nonumber&lt;br /&gt;
  &amp;amp;= S_0^2 · e^{ 2 \mu t } · (e^{ \sigma^2 t - 1 })
 \end{align}
$$&lt;/p&gt;

&lt;h2 id=&quot;o-u-process&quot;&gt;O-U Process&lt;/h2&gt;

&lt;p&gt;其实，我们同样可是使用这种方法来解一类更加广义的随机过程——O-U过程。这个过程为
$$
 \begin{align}
  d X(t) &amp;amp;=  - \kappa (X(t) - \theta) d t + \sigma dW(t). \label{ou}
 \end{align}
$$
在式子$\eqref{ou}$中，我们注意到参数 $(\kappa, \theta, \sigma)$ 决定了整个随机过程的特征：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;$\kappa$：是随机过程的「变化率」，即控制了整个随机过程向长期均值回归的快慢程度;&lt;/li&gt;
  &lt;li&gt;$\theta$：代表了随机过程的「长期均值水平」，O-U 过程最显著的特征是其具有了「均值回复」，即在变化率 $\kappa$ 的控制下变量趋于稳定的状态。这个在利率期限结构建模中经常使用，如最早的 Vasicek 利率模型就是一个典型的 O-U 过程。&lt;/li&gt;
  &lt;li&gt;$\sigma$：表示随机过程的「瞬时方差」。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;下面我们来求解显示解。&lt;/p&gt;

&lt;p&gt;首先对方程$\eqref{ou}$在区域 $[0, t]$ 进行积分得到
$$
  \begin{align}
   \int&lt;em&gt;{0}^{t} d X(u) &amp;amp;= -\int&lt;/em&gt;{0}^{t} \kappa X(u) du + \int&lt;em&gt;{0}^{t}  \kappa \theta du +  \int&lt;/em&gt;{0}^{t}  \sigma  dW(u),
  \end{align}
$$
然后两边同时乘以 $e^{\kappa u}$ 得到
$$
\begin{align}
    \int&lt;em&gt;{0}^{t} e^{\kappa u} d X(u) &amp;amp;= -\int&lt;/em&gt;{0}^{t} \kappa X(u) e^{\kappa u} du + \int&lt;em&gt;{0}^{t}  \kappa \theta e^{\kappa u} du +  \int&lt;/em&gt;{0}^{t} \sigma  e^{\kappa u} dW(u). \label{ou-int}
\end{align}
$$
我们分开求解等式两边。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;先是对左边进行&lt;strong&gt;分步积分&lt;/strong&gt;得到
$$
 \begin{align}
 LHS &amp;amp;= e^{\kappa u} X(u) |&lt;em&gt;{u=0}^{t} - \int&lt;/em&gt;{0}^{t} \kappa X(u) e^{\kappa u} du \nonumber &lt;br /&gt;
 &amp;amp;= e^{\kappa t } X(t) - X(0) - \int_{0}^{t} \kappa X(u) e^{\kappa u} du . \label{lhs}
 \end{align}
$$&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;同样的，我们也可以求出右边式子
$$
 \begin{align}
 RHS &amp;amp;= - \int&lt;em&gt;{0}^{t} \kappa X(u) e^{\kappa u} du + \int&lt;/em&gt;{0}^{t} \theta de^{\kappa u} + \int&lt;em&gt;{0}^{t}  \sigma  e^{\kappa u} dW(u) \nonumber&lt;br /&gt;
 &amp;amp;= - \int&lt;/em&gt;{0}^{t} \kappa X(u) e^{\kappa u} du + \theta (e^{\kappa t} - 1) + \int_{0}^{t}  \sigma  e^{\kappa u} dW(u)  \label{rhs}
 \end{align}
$$&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;对比$\eqref{lhs}$与$\eqref{rhs}$，
$$
 \begin{align}
 e^{\kappa t } X(t) - X(0) - \int&lt;em&gt;{0}^{t} \kappa X(u) e^{\kappa u} du
 &amp;amp;= 
 -\int&lt;/em&gt;{0}^{t} \kappa X(u) e^{\kappa u} du + \theta (e^{\kappa t} - 1) + \int&lt;em&gt;{0}^{t}  \sigma  e^{\kappa u} dW(u)  \nonumber &lt;br /&gt;
 e^{\kappa t } X(t) - X(0)
 &amp;amp;= 
 \theta (e^{\kappa t} - 1) + \int&lt;/em&gt;{0}^{t}  \sigma  e^{\kappa u} dW(u)   \nonumber &lt;br /&gt;
\Rightarrow 
  X(t)  &amp;amp;= e^{-\kappa t} (X(0)-\theta) + \theta + \int_{0}^{t}  \sigma  e^{-\kappa (t-u)} dW(u)  \label{oup} &lt;br /&gt;
 \end{align}
$$&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;section-2&quot;&gt;期望&lt;/h3&gt;
&lt;p&gt;由$\eqref{oup}$得到
$$
 \begin{align}
  X(t)  &amp;amp;= e^{-\kappa t} (X(0)-\theta) + \theta + \int&lt;em&gt;{0}^{t}  \sigma  e^{-\kappa (t-u)} dW(u) . \nonumber
 \end{align}
$$
则其期望可以表示为
$$
 \begin{align}
   E[X(t)|X(0)] &amp;amp;= E[ e^{-\kappa t} (X(0)-\theta) + \theta + \int&lt;/em&gt;{0}^{t}  \sigma  e^{-\kappa (t-u)} dW(u) ] \nonumber &lt;br /&gt;
   &amp;amp;= e^{-\kappa t} (X(0)-\theta) + \theta. \label{exp}
 \end{align}
$$
最后一项由 $W_t \sim \mathcal{N} (0, t)$ 得到。&lt;/p&gt;

&lt;p&gt;利用$\eqref{exp}$，我们可以求出 O-U 过程在长期的一个均值回复项，即
$$
 \begin{align}
   \lim_{t \rightarrow + \infty } e^{-\kappa t} (X(0)-\theta) + \theta = \theta.
 \end{align}
$$&lt;/p&gt;

&lt;h3 id=&quot;section-3&quot;&gt;协方差&lt;/h3&gt;

&lt;p&gt;任一区间内 $[s,t]$ 协方差可以由以下求出。
$$
 \begin{align}
   cov(X_s, X_t) 
   &amp;amp;= E[ (X_s-E[X_s])·(X_t-E[X_t])] \nonumber&lt;br /&gt;
   &amp;amp;= \sigma^2 E\bigg[ 
        \int&lt;em&gt;{0}^{s}    e^{-\kappa (s-u)} dW(u) ·
         \int&lt;/em&gt;{0}^{t}   e^{-\kappa (t-v)} dW(v)
            \bigg] \label{cov}
 \end{align}
$$&lt;/p&gt;

&lt;p&gt;这里我们需要使用到两个基本的概念&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;布朗运动的「独立增量」(indepdent increasement)，即任何一个布朗运动在不同期间内的增量是相互独立的，即对于区间 $[0,t], 0 \leq t&lt;em&gt;0 \leq t&lt;/em&gt;1 \leq \cdots \leq t_n \leq t$, $W(t&lt;em&gt;1)-W(t&lt;/em&gt;0)$, $W(t&lt;em&gt;2)-W(t&lt;/em&gt;1)$,$\cdots$, $W(t_n)-W(t_{n-1})$ 是相互独立的增量过程。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Ito Isometry&lt;/strong&gt; 性质：即对于一个布朗运动的独立增量，$dW_t$，有关其多项式有如下性质
$$
 \begin{align}
 E\bigg[ \bigg( \int&lt;em&gt;{0}^{t} F(u) dW(u) \bigg)^2\bigg]
 &amp;amp;= \int&lt;/em&gt;{0}^{t} E \big[ F^2(u) \big] du
 \end{align}
$$&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;利用这两个性质，对于$\eqref{cov}$，如果 $s \geq t$ (反之，$s \leq t$，则令二者调换，即 $t=\min{s,t}$)，我们有
$$
 \begin{align}
   cov(X_s, X_t)
   &amp;amp;=  \sigma^2
   E\bigg[ 
        \bigg( \int&lt;em&gt;{0}^{t}  e^{-\kappa (s-u)} dW(u)  + \int&lt;/em&gt;{t}^{s}   e^{-\kappa (s-u)} dW(u)
        \bigg)
        ·
         \int&lt;em&gt;{0}^{t}  e^{-\kappa (t-v)} dW(v)
            \bigg] &lt;br /&gt;
    &amp;amp;=  \sigma^2
    E\bigg[ 
          \int&lt;/em&gt;{0}^{t}  e^{-\kappa (s-u)} dW(u)  · \int&lt;em&gt;{0}^{t}  e^{-\kappa (t-v)} dW(v) 
           \nonumber &lt;br /&gt;
        &amp;amp; \qquad + \int&lt;/em&gt;{t}^{s}   e^{-\kappa (s-u)} dW(u) · \int&lt;em&gt;{0}^{t}  e^{-\kappa (t-v)} dW(v)
            \bigg] &lt;br /&gt;
     &amp;amp;=  \sigma^2 \Bigg{
     E\bigg[ 
          \int&lt;/em&gt;{0}^{t}  e^{-\kappa (s-u)} dW(u)  · \int&lt;em&gt;{0}^{t}  e^{-\kappa (t-v)} dW(v) 
          \bigg] 
          \nonumber &lt;br /&gt;
    &amp;amp; \qquad +  E\bigg[ 
          \int&lt;/em&gt;{t}^{s}   e^{-\kappa (s-u)} dW(u) · \int_{0}^{t}  e^{-\kappa (t-v)} dW(v)
          \bigg]&lt;br /&gt;
    \Bigg}，    \label{cov1}   &lt;br /&gt;
 \end{align}
$$&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;对于第一项我们需要使用 &lt;strong&gt;Ito Isometry&lt;/strong&gt; 性质,
$$
 \begin{align}
 E\bigg[ 
        \int&lt;em&gt;{0}^{t}  e^{-\kappa (s-u)} dW(u)  · \int&lt;/em&gt;{0}^{t}  e^{-\kappa (t-v)} dW(v) 
        \bigg]
  &amp;amp;=
  E\bigg[ 
        \int_{0}^{t}  e^{-\kappa (s-u)} · e^{-\kappa (t-u)}  du 
        \bigg] &lt;br /&gt;
 \end{align}
$$&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;而第二向可以由布朗运动的独立增量性质消除，
$$
 \begin{align}
 &amp;amp; E\bigg[ 
        \int&lt;em&gt;{t}^{s}   e^{-\kappa (s-u)} dW(u) · \int&lt;/em&gt;{0}^{t}  e^{-\kappa (t-v)} dW(v)
        \bigg] &amp;amp; \nonumber &lt;br /&gt;
  =&amp;amp; E\bigg[ 
        \int&lt;em&gt;{t}^{s}   e^{-\kappa (s-u)} dW(u) 
        \bigg] 
        ·
     E\bigg[ 
       \int&lt;/em&gt;{0}^{t}  e^{-\kappa (t-v)} dW(v)
        \bigg] 
  = 0 
 \end{align}
$$
因此，方程$\eqref{cov1}$变为
$$
 \begin{align}
 cov(X_s, X_t)
 &amp;amp;= \sigma^2 \Bigg{
   E\bigg[ 
        \int&lt;em&gt;{0}^{t}  e^{-\kappa (s-u)} · e^{-\kappa (t-u)}  du 
        \bigg]
   \Bigg}   \label{cov2} &lt;br /&gt;
&amp;amp;= \sigma^2 \Bigg{
    e^{-\kappa (s+t)}
    E\bigg[ 
        \int&lt;/em&gt;{0}^{t}  e^{2\kappa u}  du 
        \bigg]
 \Bigg}&lt;br /&gt;
  = \sigma^2 ·
    e^{-\kappa (s+t)}
    ·
    \frac{1}{2\kappa}
    ·  e^{2\kappa u}\bigg|_{u=0}^{t} &lt;br /&gt;
  &amp;amp;= \frac{\sigma^2}{2\kappa} e^{-\kappa (s+t)} · \Bigg( e^{2\kappa t} -1 \Bigg).
 \end{align}
$$
也就是说，对于任何一个协方差，我们都有
$$
 \begin{align}
 cov(X_s, X_t) 
 &amp;amp;= \frac{\sigma^2}{2\kappa} e^{-\kappa (s+t)} · \Bigg( e^{2\kappa · \min{s,t} } -1 \Bigg).
 \end{align}
$$&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;section-4&quot;&gt;方差&lt;/h3&gt;

&lt;p&gt;方差也就是0阶协方差，
$$
 \begin{align}
   Var(X_t)
   &amp;amp;= cov(X_t, X_t)
   = \frac{\sigma^2}{2\kappa} e^{-\kappa (t+t)} · \Bigg( e^{2\kappa · \min{t,t} } -1 \Bigg) \nonumber&lt;br /&gt;
   &amp;amp;= \frac{\sigma^2}{2\kappa} \Bigg( 1 - e^{ -2\kappa t } \Bigg) 
 \end{align}
$$&lt;/p&gt;

<img src="http://img.tongji.linezing.com/3379661/tongji.gif" border="0" /></content>
 </entry>
 
 <entry>
   <title>不甘心的这辈子</title>
   <link href="http://williamlfang.github.com/cn/2014/03/14/bu-gan-xin-de-zhe-bei-zi/"/>
   <updated>2014-03-14T00:00:00+08:00</updated>
   <id>http://williamlfang.github.com/cn/2014/03/14/bu-gan-xin-de-zhe-bei-zi</id>
   <content type="html">&lt;p&gt;我有一个朋友，虽然不怎么见面，也不常常往来，只是偶尔的通着电话，聊聊一些无关痛痒的话题。毕竟，我们都有自己的生活与世界，也活在不同的时光里，却每回有过联系，都是彼此相互诉说与倾听。他有他的故事，也许平时不愿让人知晓他坚强背后的忧伤，兴许对某个女生长期稚气般却执着的感情，他都会在电话那头自顾自己的说着，天涯海角的，他此时像是一个手持油笔的画家，恣意盎然的描述那个属于自己的星空。而我，只是静默的聆听着这样的诉说。&lt;/p&gt;

&lt;p&gt;因为我知道，更多时候，我也是线端那头的他，变化的只是手里的那只画笔从深灰色到暗蓝色。&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;我不知道这样的通话保持了多少年的光阴，也许是从他离开高中之后。后来渐渐失去音讯，却又在我大学的某个晚上，出乎意料却时常期盼地接到他从北方的北方给我拨打的一通电话。话音那头，我甚至分不清逝去的时光去向那里，我们仿佛依旧是年少，依旧有许多的话，彼此不去理解，只是聆听着。&lt;/p&gt;

&lt;p&gt;这样的时候，只是偶尔，却也温馨。&lt;/p&gt;

&lt;p&gt;我的大学四年里，常常被各种针管与测试困扰着，被各种不理想的血糖测值烦扰，胰岛素与胰岛素，这些生物学的概念从未如此接近我。那时候，我也想象一个健康而完全的少年在绿茵场奔跑的样子，想象在广袤的原野间如风极驰，没有任何的羁绊与束缚。我想我上辈子是风，下辈子是雨，那么这辈子我最好还是安分些。&lt;/p&gt;

&lt;p&gt;也就是在这样的四年里，我的朋友，他从远方拨打的一通通电话，给了我自由舒展的想象空间，给了我任自挥舞的浓墨笔尖，得以在我这张空白的即将清零的人生里，尽情的多写了几个字符，多绘了一丁点的颜色，以至于在这个北方昏暗的阴霾天里，得以看多一点希望。多少年后，我一直去努力回忆那些夜晚里到达的电话铃声，嘀嘀嘀嘀，声音缓缓却催促，低沉却是在这个无情的黑暗里照见最远方向的灯火，我也试图靠着这仅有的一点过去，伴我走完余下的路程。&lt;/p&gt;

&lt;p&gt;来到厦门后，我的心情有了好转，再加上平时有到环岛路去慢跑，血糖水平得到了一定的控制。这样得意忘形的日子里，我却逐渐忘却了我那个可爱的朋友，还有他低沉的嗓音。我们比往日的偶尔更加偶尔的联系着，不高不低不急不慢，缓缓的如同巴赫的曲子，在夜间的小溪边叮咚的流淌，有时像是夏夜的虫鸣，各自吱了一声，便匆匆的收起赶场的伙计，各自回家。&lt;/p&gt;

&lt;p&gt;直到有一天，我试着再像一只远走的老马循着旧日时光的足迹，不急不慢的敲打那几个熟悉的数字按钮，却等到了无穷无尽的等待。话线的那端，像是一个迷路的孩子，在外面的世界兴冲冲的玩耍了整天，却突然找不到回家的路，悄悄躲在某个幽暗的角落独自啜泣，音调时慢时快，却是同样的曲调不急不慢。我却殊不知，这个流浪的孩子，真的迷失在黑森林的暗道里，走不出来，找不到回家的路了。&lt;/p&gt;

&lt;p&gt;我以前跟他说，我常常抱怨这辈子为病痛所折磨，堂堂男儿身，却被这样的无情的病魔捆绑在这无用而尽费热量的躯干里面。我这不甘心的一辈子。还有很多的事，已经不能完成的，没能想要完成的，还有来不及完成。&lt;/p&gt;

&lt;p&gt;我的朋友，他还有很多事情没有完成的，却真的不能完成了。&lt;/p&gt;

&lt;p&gt;我这不甘心的一辈子，已经在过去结束了。&lt;/p&gt;

<img src="http://img.tongji.linezing.com/3379661/tongji.gif" border="0" /></content>
 </entry>
 
 <entry>
   <title>诸多事情</title>
   <link href="http://williamlfang.github.com/cn/2014/02/12/zhu-duo-shi-qing/"/>
   <updated>2014-02-12T00:00:00+08:00</updated>
   <id>http://williamlfang.github.com/cn/2014/02/12/zhu-duo-shi-qing</id>
   <content type="html">&lt;p&gt;想着有一段时间没有码字了，指尖竟然有些生疏。其实每次打开笔记本，总是想着要有千言万语诉说，那种浓厚的情绪像是一次乘坐列车的远行去拜见一位老友，漫长的路途上早就打好了腹稿构造了完整的画面，可是真正见面了，我们却什么也不说，只是静静的凝望彼此，一言不发。我是有着千般感情万种思绪，却像是失去了老友多年消息总是联系不上了，我愈要赴会，却不知该买到何站的列车。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;此情可待成追忆，只是当时已惘然。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;section&quot;&gt;一场团圆的春节&lt;/h2&gt;

&lt;p&gt;这个春节过得平淡，安静的出奇。本来嘛，厦门就是一个旅游的城市，人来人往，车水马龙，热闹喧嚣，浮华尘世，这个本该就是这座城市的标志。可是真正到了春节，却也少了人，不见了往日的喧嚣。这座城市一下子变得可爱，如含蓄的姑娘，像待放的花苞，羞羞答答的。大抵是政府的规定只为贪图省事（baoli zhifa），我们的城市在春节期间竟然不允许燃放烟花。只是冷冷清清的城市，在这个孤孤单单的季节里，多少显得有点委屈。&lt;/p&gt;

&lt;p&gt;不过几日的天气倒是也好。阳光灿烂如孩童的笑脸天真无瑕，暖心的却不热烈，滑落在皮肤生怕破碎。有一天猪头提议全家动身前去东坪山晒太阳，只为了这一刻的阳光弥足珍贵。是啊，往前每每在老家过年，春节这几天几乎都是阴雨连天，难得的出现这么晴朗的天气。南方的小渔村更添了几分冷意，空气了充斥了水气的冰冻，像是凝结的薄幕。更有那些象征喜庆的鞭炮在燃放过后四处挥舞的烟雾，掺杂在冰晶的半空，久久不散，犹如仙境。一个人常年在外旅居，此刻见了这般景象，竟有一些感伤，仿佛这是一股催泪剂，流浪的酸楚与归家的喜悦一齐涌上眼角，润湿了眼眶。&lt;/p&gt;

&lt;p&gt;今天春节并没有回老家过春节。年前和猪头商量了一下，决定邀请家中两位老人来厦团聚。一来是我们也没有那么多时间，本来她的假期就少得可怜，这来来回回的在路上费的时间多，也够折腾人（航班经常改道，火车时而晚点），小咪豆也不大适合舟车劳顿，怕了出了漏子；二来，我们也想让老人家出来走走，毕竟厦门这个春节的天气真的是好的惹人疼爱，招人喜欢，而且在这边我们两个都比较熟悉，平时出来旅游吃饭都挺方便的。于是乎，我们家今年便最终在厦门团聚了。&lt;/p&gt;

&lt;h2 id=&quot;section-1&quot;&gt;一次未行的聚会&lt;/h2&gt;

&lt;p&gt;掐指一算，现在离初中毕业已经十年了。十年可算是一个大时期，我从一个毛头小伙子到一个丈夫与一个孩子的父亲。走过的这十年，一直都坎坎坷坷，曲曲折折。人生本当如此，历经风雨，奋斗不止，在晚年回首方有可念之处。可是这十年来，我总是那么的羡慕当初的那个纯真的孩子，一脸惘然的朝向未知的旅途，却也满心的勇气。&lt;/p&gt;

&lt;p&gt;初中的校园坐落在一个海滩湾处。小，而且年代久远，当时又正值人口峰值，我们的学校里竟然漫漫的都是人。这业已脱离了我对学校的概念，原先的小学人少，地大，小伙伴们总是有各种玩趣之地可去。可是现在，我只能在教室里待着，不能出去，稍不小心，便有人在走廊里撞到了。在这个拥挤甚至可以说是臃肿的校园里，我却感到无尽的孤单。人与人的会面，往往加深了心与心的分裂。愈多的人，愈感孤单。这种在人多之处说体会到的孤单，长年累月的陪伴着我，阴魂不散，挥之不去。&lt;/p&gt;

&lt;p&gt;初中唯一让我着迷的事情，是数学课本里那些由符号与方程编写而成的美丽世界。它们像极了天际线在昏黄夜晚的轮廓，淡淡的泛着氤氲。很多时候，我愿凝视这个虚无缥缈却深埋心底的幻城，痴痴的美梦着，想要得到那个神秘的答案。&lt;/p&gt;

&lt;p&gt;无数的小时里，我把自己深埋在那些符号里，不吭一声。我的这种孤傲与孤单，将周边的同学都隔离起来了，不再联系。其实，我只是不说一句话；其实，我只是一直都孤单着。&lt;/p&gt;

&lt;p&gt;很多的年头里，我不曾与我的那些小伙伴们联络。&lt;/p&gt;

&lt;p&gt;今年突然听娜姐给我电话（我也不知她何来家里的号码），说是春节会有同学聚会，毕竟许多人已经不见整十年，希望此次可以相聚会面。可是，这次命运又在捉弄玩笑，今年正值全家都齐来厦门团聚，并没有计划会老家。而家中尚有小咪豆需要照顾，故而此次聚会也无奈不能成行。&lt;/p&gt;

&lt;h2 id=&quot;section-2&quot;&gt;一个未果的问题&lt;/h2&gt;

&lt;p&gt;有一个悬而未解的问题，未果，不便诉说。&lt;/p&gt;

<img src="http://img.tongji.linezing.com/3379661/tongji.gif" border="0" /></content>
 </entry>
 
 <entry>
   <title>美联储的「博士系」</title>
   <link href="http://williamlfang.github.com/cn/2014/02/12/mei-lian-chu-de-bo-shi-xi/"/>
   <updated>2014-02-12T00:00:00+08:00</updated>
   <id>http://williamlfang.github.com/cn/2014/02/12/mei-lian-chu-de-bo-shi-xi</id>
   <content type="html">&lt;p&gt;下午在浏览『华尔街见闻』的时候正好看到了这样一篇有意思的文章，大致介绍了美联储是如何从一个由实干家（如银行家与金融巨头）组成的俱乐部升级成由一帮&lt;a href=&quot;http://wallstreetcn.com/node/75851&quot;&gt;经济学博士引领的「学院派」&lt;/a&gt;。文章写的条理比较清楚的了，从成员的学位背景出发梳理了美联储的发展历程。诸位如果感兴趣可以前去看看。我这里主要是提供一个个人的随想而已。&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;首先来一个「全家福」吧。
&lt;a href=&quot;/cn/assets/images/r-figures/2014-02-12-mei-lian-chu-de-bo-shi-xi/fed.jpg&quot;&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-02-12-mei-lian-chu-de-bo-shi-xi/fed.jpg&quot; alt=&quot;the fed&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;文章谈到了对美联储决策有重要影响的几位「高官」的学历背景。目前新晋美联储主席的耶伦（Yellen）拥有 Yale 经济学博士学历，其在学术界有颇有建树。而那些身处高职的几位委员会成员（&lt;strong&gt;FOMC&lt;/strong&gt;）均配有经济学博士学位，如 Stanley Fischer 就是前 &lt;strong&gt;IMF&lt;/strong&gt; 的首席经济学家 [^1] 。而如果从历史的纵向来看，这个趋势就更加明显了：沃尔克当时还只是经济学硕士，到了格林斯潘后来获得博士学位，而前任伯南克就已经是一名正式的大学（宏观）经济学教授了。Blinder 是原 &lt;strong&gt;FOMC&lt;/strong&gt; 委员，他对 &lt;strong&gt;Fed&lt;/strong&gt; 的历史颇有研究，宣称：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;我相信，当时在美联储80年的历史中，我是第四个或第五个学院派委员。不久后耶伦也来了，然后学院派就开始蜂拥而入。如今，这是一个很正常的现象，而且学院派教授更受欢迎。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;中国有古语说『物以类聚，人以群分』，这个自然界的普遍真理同样适用于经济学界。我们经常看到持有不同观点的学派之间是如何明争暗斗的，比如早些年的世纪大战——凯恩斯与哈耶克的论战，到后来由弗里德曼扛旗的货币主义学派反攻凯恩斯主义阵营。有些时候我真就觉得经济学这个大火锅里搅拌的是娱乐圈的废料，「你方唱罢我来和」，不无热闹，却全无一点增进人民福祉的实景。&lt;/p&gt;

&lt;p&gt;当初成立美联储的初衷是为了结束美国国内混乱的金融秩序，统一由一个中央决策机构来制定、执行货币政策。因此，当初在位掌权的一般都是一些银行家与金融巨头，大家都比较注重实干，以直觉和经验取胜，很少能寻觅到经济学院派的作风。&lt;/p&gt;

&lt;p&gt;物是人非，斗转星移，我们现在看到美联储的境况，清一色的由理论界与学院派占山为王，并且在将来的很长一段时间内，这样的趋势会进一步明显。这些成员一般都具有良好的经济学训练，取得正规的博士学位，而且绝大部分还有过学术研究的经历，在各自的领域都有不小的影响力。如前任伯南克，在研究经济萧条理论、商业周期、宏观经济与失业率等诸多方面颇有成就。下面这幅图揭示了在美联储长达一个世纪的演变过程中，成员学术能力的提升。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-02-12-mei-lian-chu-de-bo-shi-xi/position.jpg&quot; alt=&quot;position&quot; /&gt;&lt;/p&gt;

&lt;p&gt;就美联储成员在学位背景上不断更新的情况来分析，文章是这样认为的：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;美联储拥有越来越多的博士可能是件好事。一个只有经济学博士担任高级职位的美联储将有很多局限。多元化会带来各种正面效应，单一文化则会脆弱和不健康。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;我的想法是，今后金融实务界能够更好的预测到美联储的决策机制了。在以前，美联储在公开市场的决策与操作动机基本是一个黑盒子，外界无从知晓。到了上世纪70年代，美联储才开始注重与大众的沟通，定期的发布公告向金融市场传送消息，并且在独立性方面获得了巨大的改善。可是外界在对美联储的决策进行拿捏把握上依然小心谨慎，如履薄冰。这归根到底还是因为美联储的决策机制不够开放，无法面向外界提供所有的内部信息。而正是这种信息上的不对称，导致每次在美联储闭门研讨经济决策的前后时期均可看到明显的市场波动，伤害经济的稳健。&lt;/p&gt;

&lt;p&gt;而现在，我们可以从美联储成员的组成结构上获得一定的「启发」。不同的经济学理论在针对同样一个经济问题时提供的解决方案千差万别，有时甚至是南辕北辙，背道而驰。因此，我们可以借助对美联储组成成员的经济理论主张上分析其未来的决策风格与指导理论，从而在一定程度上透析美联储这个神秘的机构。我的建议时，当前的市场参与者还是需要对新一届的美联储决策机构多做一些「功课」，以便深入了解其决策特征，从而更好的预测与把握美联储在今后制定的各项经济政策。&lt;/p&gt;

&lt;p&gt;当然，我们也可以从另外一个方面看问题。就是如果美联储的成员构成正的过于学院派，那么其在应对更加具体的金融事件上，可能不会从金融实务界的形势出发，或者干脆就忽视了那些真正需要解决问题的方案的银行家的呼声。这对美联储今后的决策有效性不得不大打折扣，甚至在某些时候反而会伤害实际经济的健康发展。纯粹由经济理论模型提出的药方往往不能够良好的「接地气」，反而挫伤实体经济的积极性。&lt;/p&gt;

&lt;p&gt;[^1] Fischer 也是学术界的大牛，和 Blanchard 共同著有“Lectures on Macroeconomcis”，红极一时，可谓那个时代的标准 &lt;em&gt;textbook&lt;/em&gt;。&lt;/p&gt;

<img src="http://img.tongji.linezing.com/3379661/tongji.gif" border="0" /></content>
 </entry>
 
 <entry>
   <title>Data Structure</title>
   <link href="http://williamlfang.github.com/cn/2014/01/26/data-structure/"/>
   <updated>2014-01-26T00:00:00+08:00</updated>
   <id>http://williamlfang.github.com/cn/2014/01/26/data-structure</id>
   <content type="html">&lt;p&gt;这一章主要介绍了在 &lt;strong&gt;R&lt;/strong&gt; 中最基本的元素：数据。前段时间我在网上看到一个帖子（暂时忘记在哪里找到了），强调「data science」的重心不是在前面的那个「data」，而是后面的「science」。这是因为随着互联网的深入发展，我们现在不再是缺乏数据，反而是面临着「big data」造成的「information rich」（信息冗余）的困扰。因此，今后的数据科学应当更进一步的发展新的理论与方法来解决大数据分析。&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;好了，这个扯远了。不过在 &lt;strong&gt;R&lt;/strong&gt; 中，我们最紧要的事情就是：给了一大箩筐的数据，可能是排列完整的，不过大多数情况下是混乱不堪的，要求对这些数据做统计分析与可视化工作。这个基本上是一件既头疼又心烦的苦差事。首先的任务是，先对这些数据做一定格局的处理，得到我们后续需要使用的信息变量。因此，熟练掌握处理数据的基本方法，对未来的分析至关重要。&lt;/p&gt;

&lt;h2 id=&quot;section&quot;&gt;概览&lt;/h2&gt;

&lt;p&gt;Wickham 用一张表格总结了 &lt;strong&gt;R&lt;/strong&gt; 中的数据结构&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;R’s base data structures are summarised in the table below, organised by their dimensionality and whether they’re homogeneous (all contents must be of the same type) or heterogeneous (the contents can be of different types):&lt;/p&gt;

  &lt;table&gt;
    &lt;thead&gt;
      &lt;tr&gt;
        &lt;th&gt; &lt;/th&gt;
        &lt;th&gt;Homogeneous&lt;/th&gt;
        &lt;th&gt;Heterogeneous&lt;/th&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
      &lt;tr&gt;
        &lt;td&gt;1d&lt;/td&gt;
        &lt;td&gt;Atomic vector&lt;/td&gt;
        &lt;td&gt;List&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;2d&lt;/td&gt;
        &lt;td&gt;Matrix&lt;/td&gt;
        &lt;td&gt;Data frame&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;nd&lt;/td&gt;
        &lt;td&gt;Array&lt;/td&gt;
        &lt;td&gt; &lt;/td&gt;
      &lt;/tr&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;
&lt;/blockquote&gt;

&lt;p&gt;需要解释的是标量（scalar）。什么是标量呢？就是一个个单独的变量，如&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;x &amp;lt;- 5
y &amp;lt;- &quot;scalar&quot;

x

## [1] 5

y

## [1] &quot;scalar&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;R&lt;/strong&gt; 默认地将标量识别为 1*1 的向量（vector），也就是 0-dimensional。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;这里科普一下有关 &lt;strong&gt;R&lt;/strong&gt; 中的面向对象的特征。也就是说， &lt;strong&gt;R&lt;/strong&gt; 中所有的元素都可以叫做「对象」（obgect），这不仅仅是基本的数据，如向量、data frame，还包括函数（function）、环境（environment），甚至是符号（symbols）。 &lt;strong&gt;R&lt;/strong&gt; 处理完分析后得到的就是一个对象，我们需要哪儿元素，直接提取就可以了。比如，&lt;/p&gt;

&lt;/blockquote&gt;

&lt;pre&gt;&lt;code&gt;    df = data.frame(x = rnorm(100, 0, 1), y = seq(from = 1, to = 100))
    result &amp;lt;- lm(y ~ x, data = df)
    
    result

    ## 
    ## Call:
    ## lm(formula = y ~ x, data = df)
    ## 
    ## Coefficients:
    ## (Intercept)            x  
    ##       51.01         3.01
&lt;/code&gt;&lt;/pre&gt;

&lt;blockquote&gt;
  &lt;p&gt;得到的结果存储在 &lt;code&gt;result&lt;/code&gt; 里，这个就是一个对象，等到我们需要使用其中的「子对象」时，再从中提取即可&lt;/p&gt;
&lt;/blockquote&gt;

&lt;pre&gt;&lt;code&gt;    result$coeff

    ## (Intercept)           x 
    ##      51.005       3.007
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;面向对象的编程能够提供非常灵活的数据处理结果，并且具有较高的程序维护性。这在 &lt;strong&gt;R&lt;/strong&gt; 得到了极大的展现。&lt;/p&gt;

&lt;h3 id=&quot;str&quot;&gt;&lt;code&gt;str()&lt;/code&gt;：查看数据结构&lt;/h3&gt;
&lt;p&gt;查看数据类型可以使用命令 &lt;code&gt;str()&lt;/code&gt; &lt;/p&gt;

&lt;pre&gt;&lt;code&gt;str(df)

## 'data.frame':	100 obs. of  2 variables:
##  $ x: num  0.659 0.277 0.614 -0.655 -0.896 ...
##  $ y: int  1 2 3 4 5 6 7 8 9 10 ...
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;section-1&quot;&gt;向量&lt;/h2&gt;

&lt;p&gt;如上所述， &lt;strong&gt;R&lt;/strong&gt; 中主要的一维数据类型包括 &lt;code&gt;atomic vector&lt;/code&gt;（基础向量） 和 &lt;code&gt;list&lt;/code&gt;（列表），前者要求罗列其中的数据均是同属性的，比如 &lt;code&gt;logical&lt;/code&gt;，&lt;code&gt;interger&lt;/code&gt;，&lt;code&gt;double&lt;/code&gt;，和 &lt;code&gt;character&lt;/code&gt;。而后者 &lt;code&gt;list&lt;/code&gt; 则可以是多种数据类型的混合。&lt;/p&gt;

&lt;h3 id=&quot;section-2&quot;&gt;基础向量&lt;/h3&gt;

&lt;p&gt;基础向量是组成 &lt;strong&gt;R&lt;/strong&gt; 编程语言的基石，可以由此构成其他类型的数据结构。怎么去理解  &lt;strong&gt;R&lt;/strong&gt; 中的向量呢？&lt;/p&gt;

&lt;h4 id=&quot;section-3&quot;&gt;数据的向量化&lt;/h4&gt;

&lt;p&gt;其实，这个可以看作是一个研究变量的序列观测值。比如&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;x &amp;lt;- c(35.6, 36.1, 35.8, 37, 36.5, 37.2, 35.8)
str(x)

##  num [1:7] 35.6 36.1 35.8 37 36.5 37.2 35.8

is.vector(x)

## [1] TRUE
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;这个就是一个向量，可以视为一天中在七个不同时间段的气温观测。因此，我们可以利用这个向量来产生矩阵，从而实现多元变量在不同时间序列上的观测值。其实，这种数据的向量化不仅提供了对数据的直观理解，而且还能提高 &lt;strong&gt;R&lt;/strong&gt; 的运算速度，尽量避免使用循环，优化程序。这点我们在日后会继续讨论。&lt;/p&gt;

&lt;h4 id=&quot;section-4&quot;&gt;生成向量的方法&lt;/h4&gt;

&lt;p&gt;用于生成向量的命令主要有：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code&gt;c()&lt;/code&gt;:即「concantinate」的意思，用于生成一个向量，并且可用于嵌套&lt;/p&gt;

    &lt;pre&gt;&lt;code&gt;  a &amp;lt;- c(1, 2, 4, 6, 8)
  b &amp;lt;- c(1, c(2, c(4, 6.8)))  # 套嵌使用
  a == b

  ## Warning: longer object length is not a multiple of shorter object length

  ## [1]  TRUE  TRUE  TRUE FALSE FALSE

    
  s &amp;lt;- c(1:10)  # 一个序列。相当于 seq(from = 1, to = 10, by= 1)
  s

  ##  [1]  1  2  3  4  5  6  7  8  9 10

    
  int &amp;lt;- c(1L, 6L, 8L)  # 产生integer类
    
  log &amp;lt;- c(T, F, F, T, T)  # logical
    
  chr &amp;lt;- c(&quot;these&quot;, &quot;are&quot;, &quot;some&quot;, &quot;character&quot;)
&lt;/code&gt;&lt;/pre&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code&gt;seq()&lt;/code&gt;:即「sequence」的意思，主要用于产生一个带有规律的序列        &lt;/p&gt;

    &lt;pre&gt;&lt;code&gt;  f &amp;lt;- seq(1:10)  # 默认的increament是1,相当于 c(1:10)
  f

  ##  [1]  1  2  3  4  5  6  7  8  9 10

    
  g &amp;lt;- seq(from = 1, to = 10, by = 0.5)
    
  g

  ##  [1]  1.0  1.5  2.0  2.5  3.0  3.5  4.0  4.5  5.0  5.5  6.0  6.5  7.0  7.5
  ## [15]  8.0  8.5  9.0  9.5 10.0
&lt;/code&gt;&lt;/pre&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code&gt;rep()&lt;/code&gt;:即[replecate],重复某个数或者某个「序列」，可用于产生较为复杂的数据。&lt;/p&gt;

    &lt;pre&gt;&lt;code&gt;  h &amp;lt;- rep(5, 10)  # 单个数字的重复
  h

  ##  [1] 5 5 5 5 5 5 5 5 5 5

    
  j &amp;lt;- rep(c(1:3), 3)  # 重复一个序列 c(1:3)
  j

  ## [1] 1 2 3 1 2 3 1 2 3
&lt;/code&gt;&lt;/pre&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code&gt;rnorm()&lt;/code&gt;:产生随机数，还有其他的分布&lt;/p&gt;

    &lt;pre&gt;&lt;code&gt;  k &amp;lt;- rnorm(100)  #default：rnorm(no, mean = 0, sd = 1)
    
  l &amp;lt;- rnorm(100, mean = 2, sd = 5)
  plot(density(l))
&lt;/code&gt;&lt;/pre&gt;

    &lt;p&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-01-26-data-structure/unnamed-chunk-9.png&quot; alt=&quot;plot of chunk unnamed-chunk-9&quot; /&gt; &lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;section-5&quot;&gt;类型与长度&lt;/h4&gt;

&lt;p&gt;&lt;code&gt;typeof()&lt;/code&gt; 用于查看数据类型，而 &lt;code&gt;length()&lt;/code&gt; 则用于查看向量长度：如果是一维数据，则给出长度；如果是矩阵或者 &lt;code&gt;data.frame&lt;/code&gt;，则给出 &lt;code&gt;nrow&lt;/code&gt; 与 &lt;code&gt;ncol&lt;/code&gt; 的合计。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;x &amp;lt;- rnorm(100)
typeof(x)

## [1] &quot;double&quot;

length(x)

## [1] 100


y &amp;lt;- c(&quot;first&quot;, &quot;second&quot;, &quot;third&quot;)
typeof(y)

## [1] &quot;character&quot;

length(y)

## [1] 3


z &amp;lt;- c(T, T, F)
typeof(z)

## [1] &quot;logical&quot;

length(z)

## [1] 3


w &amp;lt;- seq(from = 1, to = 10, by = 1)
typeof(w)

## [1] &quot;double&quot;

length(w)

## [1] 10


mat &amp;lt;- matrix(rnorm(20), nrow = 4, ncol = 5)
typeof(mat)

## [1] &quot;double&quot;

length(mat)

## [1] 20
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;list&quot;&gt;&lt;code&gt;list&lt;/code&gt;:列表&lt;/h3&gt;

&lt;p&gt;我们已经知道，&lt;code&gt;vector&lt;/code&gt;是用于同种类型属性的数据，而&lt;code&gt;list&lt;/code&gt;则适用于不同类型的数据，可以说是各种数据的一个「大火锅」。我们使用&lt;code&gt;list()&lt;/code&gt;来生成数据，不是之前介绍的&lt;code&gt;c()&lt;/code&gt;。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;u &amp;lt;- list(1:3, &quot;cha&quot;, T, F, c(1, 4, 7), rep(1, 3), seq(1:5))

u

## [[1]]
## [1] 1 2 3
## 
## [[2]]
## [1] &quot;cha&quot;
## 
## [[3]]
## [1] TRUE
## 
## [[4]]
## [1] FALSE
## 
## [[5]]
## [1] 1 4 7
## 
## [[6]]
## [1] 1 1 1
## 
## [[7]]
## [1] 1 2 3 4 5

str(u)

## List of 7
##  $ : int [1:3] 1 2 3
##  $ : chr &quot;cha&quot;
##  $ : logi TRUE
##  $ : logi FALSE
##  $ : num [1:3] 1 4 7
##  $ : num [1:3] 1 1 1
##  $ : int [1:5] 1 2 3 4 5

typeof(u)

## [1] &quot;list&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;当然，&lt;code&gt;list&lt;/code&gt;也可以跟&lt;code&gt;c()&lt;/code&gt;一样实现套嵌 (Wickham称之为[recursive])&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;v &amp;lt;- list(list(2, 4, T, &quot;nope&quot;, seq(4:8)), rep(3:4, 2), list(T, F, &quot;yes&quot;))
v

## [[1]]
## [[1]][[1]]
## [1] 2
## 
## [[1]][[2]]
## [1] 4
## 
## [[1]][[3]]
## [1] TRUE
## 
## [[1]][[4]]
## [1] &quot;nope&quot;
## 
## [[1]][[5]]
## [1] 1 2 3 4 5
## 
## 
## [[2]]
## [1] 3 4 3 4
## 
## [[3]]
## [[3]][[1]]
## [1] TRUE
## 
## [[3]][[2]]
## [1] FALSE
## 
## [[3]][[3]]
## [1] &quot;yes&quot;


str(v)

## List of 3
##  $ :List of 5
##   ..$ : num 2
##   ..$ : num 4
##   ..$ : logi TRUE
##   ..$ : chr &quot;nope&quot;
##   ..$ : int [1:5] 1 2 3 4 5
##  $ : int [1:4] 3 4 3 4
##  $ :List of 3
##   ..$ : logi TRUE
##   ..$ : logi FALSE
##   ..$ : chr &quot;yes&quot;

typeof(v)

## [1] &quot;list&quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;factors&quot;&gt;factors:因子&lt;/h3&gt;

&lt;p&gt;因子也是一种向量类型，不过在因子里面，我们需要预先设定好水平值。换句话说，因子有两个属性特者&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;class（类型)：也就是 &lt;code&gt;factor&lt;/code&gt;，使用命令 &lt;code&gt;class()&lt;/code&gt; 来查看。&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;level (层级)：表明因子有哪些不同取值。&lt;/p&gt;

    &lt;pre&gt;&lt;code&gt;x &amp;lt;- factor(c(&quot;a&quot;, &quot;b&quot;, &quot;b&quot;, &quot;a&quot;))
x
  
## [1] a b b a
## Levels: a b
  
class(x)
  
## [1] &quot;factor&quot;
  
levels(x)
  
## [1] &quot;a&quot; &quot;b&quot;
&lt;/code&gt;&lt;/pre&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-6&quot;&gt;矩阵&lt;/h2&gt;

&lt;p&gt;前面我们解释过如何看待向量（vector）作为一个研究变量的观测，那么，一个有多祖向量组成的矩阵（&lt;strong&gt;Matrix&lt;/strong&gt;）就可以被视为是一个多元变量的观测。每一个列向量表示一个变量，而每一个行向量则表示一次的观测结果。这样，我们便可以将其与多元统计结合在一起理解了。&lt;/p&gt;

&lt;h3 id=&quot;section-7&quot;&gt;创建矩阵&lt;/h3&gt;

&lt;p&gt;由于矩阵是一个带有二维属性的数据列表，我们在创建矩阵时需要设定矩阵的行与列数目。表示矩阵列向量数据的是命令 &lt;code&gt;ncol&lt;/code&gt;, 相应的，行数目的是 &lt;code&gt;nrow&lt;/code&gt;。具体的方法有&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;预先设定好行列数：&lt;/p&gt;

    &lt;pre&gt;&lt;code&gt; mat01 &amp;lt;- matrix(1:10, ncol = 2, nrow = 5)
   
 mat01
   
 ##      [,1] [,2]
 ## [1,]    1    6
 ## [2,]    2    7
 ## [3,]    3    8
 ## [4,]    4    9
 ## [5,]    5   10
&lt;/code&gt;&lt;/pre&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;使用命令 &lt;code&gt;dim()&lt;/code&gt; 设置&lt;/p&gt;

    &lt;pre&gt;&lt;code&gt; mat02 &amp;lt;- matrix(1:10)
 dim &amp;lt;- c(2, 5)
   
 mat02
   
 ##       [,1]
 ##  [1,]    1
 ##  [2,]    2
 ##  [3,]    3
 ##  [4,]    4
 ##  [5,]    5
 ##  [6,]    6
 ##  [7,]    7
 ##  [8,]    8
 ##  [9,]    9
 ## [10,]   10
&lt;/code&gt;&lt;/pre&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;section-8&quot;&gt;矩阵的行列名称&lt;/h3&gt;

&lt;p&gt;有时候，我们需要指定矩阵当中的行列名称，就像在 &lt;strong&gt;Excel&lt;/strong&gt; 里面有表头一样。这样可以通过命令来完成&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code&gt;colnames&lt;/code&gt;：列名称。可以看作是不同的研究变量，比如在多元回归里面的不同影响因素。&lt;/p&gt;

    &lt;pre&gt;&lt;code&gt; mat03 &amp;lt;- matrix(1:15, ncol = 3, nrow = 5)
   
 mat03
   
 ##      [,1] [,2] [,3]
 ## [1,]    1    6   11
 ## [2,]    2    7   12
 ## [3,]    3    8   13
 ## [4,]    4    9   14
 ## [5,]    5   10   15
   
   
 colnames(mat03) &amp;lt;- c(&quot;x1&quot;, &quot;x2&quot;, &quot;x3&quot;)  # 三个研究变量
   
 mat03
   
 ##      x1 x2 x3
 ## [1,]  1  6 11
 ## [2,]  2  7 12
 ## [3,]  3  8 13
 ## [4,]  4  9 14
 ## [5,]  5 10 15
&lt;/code&gt;&lt;/pre&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code&gt;rownams&lt;/code&gt;：行名称，算作一次的截面数据。&lt;/p&gt;

    &lt;pre&gt;&lt;code&gt; mat04 &amp;lt;- matrix(1:15, ncol = 5, nrow = 3)
   
 mat04
   
 ##      [,1] [,2] [,3] [,4] [,5]
 ## [1,]    1    4    7   10   13
 ## [2,]    2    5    8   11   14
 ## [3,]    3    6    9   12   15
   
   
 rownames(mat04) &amp;lt;- c(&quot;obs01&quot;, &quot;obs02&quot;, &quot;obs03&quot;)
   
 mat04
   
 ##       [,1] [,2] [,3] [,4] [,5]
 ## obs01    1    4    7   10   13
 ## obs02    2    5    8   11   14
 ## obs03    3    6    9   12   15
&lt;/code&gt;&lt;/pre&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;data-frames&quot;&gt;Data Frames：数据框&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;Data Frame&lt;/strong&gt; 可以说是 &lt;strong&gt;R&lt;/strong&gt; 中最重要的数据类型了，一方面，既具有向量的特征，表示同样长度的变量数据，另一方面，还保持了 &lt;code&gt;list&lt;/code&gt; 中对不同类型数据的支持。这个也是我们做计量经济分析主要用到的数据结构。&lt;strong&gt;Data Frame&lt;/strong&gt; 在很多的方面都与 &lt;strong&gt;matrix&lt;/strong&gt; 相似，比如 &lt;code&gt;colnames&lt;/code&gt;, &lt;code&gt;dim&lt;/code&gt;。&lt;/p&gt;

&lt;h3 id=&quot;dataframe&quot;&gt;建立 dataframe&lt;/h3&gt;

&lt;p&gt;建立 &lt;strong&gt;Data Frame&lt;/strong&gt; 的命令是 &lt;code&gt;data.frame&lt;/code&gt;，要求是行数目要相同，列向量允许不同类型的数据。比如，有一个数据是这样的，第一个为姓名，第二个是性别，接着是收入，受教育年限，等等。这些都可以在 &lt;strong&gt;Data Frame&lt;/strong&gt; 共存。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;df &amp;lt;- data.frame(x = 1:5, y = c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;))

df

##   x y
## 1 1 a
## 2 2 b
## 3 3 c
## 4 4 d
## 5 5 e


str(df)

## 'data.frame':	5 obs. of  2 variables:
##  $ x: int  1 2 3 4 5
##  $ y: Factor w/ 5 levels &quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;,..: 1 2 3 4 5
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;这里有一点需要特别注意，&lt;strong&gt;R&lt;/strong&gt; 会默认在数据框里面将字符型（string)转化为因子（factor），如果不想要转化，可以通过参数 &lt;code&gt;stringsAsFactors = FALSE&lt;/code&gt; 来设置。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;df_02 &amp;lt;- data.frame(x = 1:5, y = c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;), stringsAsFactors = FALSE)

df_02

##   x y
## 1 1 a
## 2 2 b
## 3 3 c
## 4 4 d
## 5 5 e


str(df_02)

## 'data.frame':	5 obs. of  2 variables:
##  $ x: int  1 2 3 4 5
##  $ y: chr  &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; ...
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;data-frame&quot;&gt;合并 &lt;strong&gt;data frame&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;其实我们在上面介绍向量合并的时候已经接触到这个函数了，即 &lt;code&gt;cbind()&lt;/code&gt; 和 &lt;code&gt;rbind()&lt;/code&gt;。前者是按照列顺序进行合并，后者则是按照行顺序优先进行合并。
- &lt;code&gt;cbind()&lt;/code&gt;：列合并&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;   df &amp;lt;- data.frame(x = 1:5, y = c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;))
   
   df
   
   ##   x y
   ## 1 1 a
   ## 2 2 b
   ## 3 3 c
   ## 4 4 d
   ## 5 5 e
   
   
   str(df)
   
   ## 'data.frame':	5 obs. of  2 variables:
   ##  $ x: int  1 2 3 4 5
   ##  $ y: Factor w/ 5 levels &quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;,..: 1 2 3 4 5
   
   
   df_cbind &amp;lt;- cbind(df, data.frame(z = 5:1))
   
   df_cbind
   
   ##   x y z
   ## 1 1 a 5
   ## 2 2 b 4
   ## 3 3 c 3
   ## 4 4 d 2
   ## 5 5 e 1
   
   
   str(df_cbind)
   
   ## 'data.frame':	5 obs. of  3 variables:
   ##  $ x: int  1 2 3 4 5
   ##  $ y: Factor w/ 5 levels &quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;,..: 1 2 3 4 5
   ##  $ z: int  5 4 3 2 1
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code&gt;rbind()&lt;/code&gt;：行合并&lt;/p&gt;

    &lt;pre&gt;&lt;code&gt;df &amp;lt;- data.frame(x = 1:5, y = c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;))
  
df
  
##   x y
## 1 1 a
## 2 2 b
## 3 3 c
## 4 4 d
## 5 5 e
  
  
str(df)
  
## 'data.frame':	5 obs. of  2 variables:
##  $ x: int  1 2 3 4 5
##  $ y: Factor w/ 5 levels &quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;,..: 1 2 3 4 5
  
  
df_rbind &amp;lt;- rbind(df, data.frame(x = 10, y = &quot;j&quot;))
  
df_rbind
  
##    x y
## 1  1 a
## 2  2 b
## 3  3 c
## 4  4 d
## 5  5 e
## 6 10 j
  
  
str(df_rbind)
  
## 'data.frame':	6 obs. of  2 variables:
##  $ x: num  1 2 3 4 5 10
##  $ y: Factor w/ 6 levels &quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;,..: 1 2 3 4 5 6
&lt;/code&gt;&lt;/pre&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;section-9&quot;&gt;提取列向量&lt;/h3&gt;

&lt;p&gt;对于一个 &lt;strong&gt;data frame&lt;/strong&gt;，里面包含了非常多的信息。有时，我们只需要提取其中的某个列向量（也就是一个变量），那么可以使用 &lt;code&gt;$&lt;/code&gt; 来实现&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;df &amp;lt;- data.frame(x = 1:5, y = c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;))

df

##   x y
## 1 1 a
## 2 2 b
## 3 3 c
## 4 4 d
## 5 5 e


df$x

## [1] 1 2 3 4 5
&lt;/code&gt;&lt;/pre&gt;

<img src="http://img.tongji.linezing.com/3379661/tongji.gif" border="0" /></content>
 </entry>
 
 
</feed>
