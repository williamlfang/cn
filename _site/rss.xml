<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0">
<channel>
        <title>方莲 | William</title>
        <description>方莲 | William - william</description>
        <link>http://williamlfang.github.com/cn</link>
        <lastBuildDate>2014-08-13 16:00:09 +0800</lastBuildDate>
        <pubDate>2014-08-13 16:00:09 +0800</pubDate>
        <ttl>60</ttl>
　     　<copyright>版权所有</copyright>
　　     <language>zh-cn</language>
　     　<generator>nju.pt</generator>


        <item>
                <title>GoAgent启动后无反应的问题解决方法</title>
                <description>&lt;p&gt;我一直都在使用 Google 开发的一款翻墙插件上网。这个「神器」在我的博客里面也有&lt;a href=&quot;http://williamlfang.github.io/cn/2014/01/05/goagent/&quot;&gt;介绍&lt;/a&gt;。科学上网，远离 GFW。&lt;/p&gt;

&lt;p&gt;不过十分蹊跷的是，这几天使用 &lt;code&gt;Goagent&lt;/code&gt; 的时候出现了不明的原因。情况是这样的：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;正常启动 &lt;code&gt;goagent-gtk.py&lt;/code&gt; 后可以现实界面，没有报错的情况。可是也没有出现 &lt;code&gt;log&lt;/code&gt; 上传信息的提示。然后使用 &lt;code&gt;Chrome&lt;/code&gt; 登入，已经无法翻墙了。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;!-- more --&gt;

&lt;p&gt;无法翻墙对我来说就像关进了一个思想的囚牢，难以自由。现在连基本的 &lt;code&gt;Google&lt;/code&gt; 网站都无法登入，使用 &lt;code&gt;Baidu&lt;/code&gt; 来搜索，根本就没有任何的记录。&lt;/p&gt;

&lt;p&gt;我首先想到的是必须要通过 &lt;code&gt;Google&lt;/code&gt; 来寻求帮助。我在 &lt;code&gt;Linux&lt;/code&gt; 的主机下有安装了 &lt;code&gt;VirtualBox&lt;/code&gt;，里面的 &lt;code&gt;Chrome&lt;/code&gt; 是可以正常访问 &lt;code&gt;Google&lt;/code&gt; 的。联想到我以前是通过修改 &lt;code&gt;hosts&lt;/code&gt; 进行简单的翻墙，因此首先复制一份 &lt;code&gt;Windows&lt;/code&gt; 里面的 &lt;code&gt;hosts&lt;/code&gt;到 &lt;code&gt;Linux&lt;/code&gt; 在 &lt;code&gt;ets\hosts&lt;/code&gt;。这样是基本可以访问 &lt;code&gt;Google&lt;/code&gt; 了。&lt;/p&gt;

&lt;p&gt;通过 Google 搜索以下问题，立马就有类似的&lt;a href=&quot;https://code.google.com/p/goagent/issues/detail?id=11826&quot;&gt;情况出现&lt;/a&gt;了&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;goagent  启动后 没反应&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;找到上面的提示，说是可能跟某个插件有冲突。同时，下面的评论里面也有提到说可能会跟优酷的一款去广告插件冲突。突然想到前几天有通过 Chrome Store 安装了一个取出优酷视频广告的插件，然后接下来的几天都无法使用 &lt;code&gt;Goagent&lt;/code&gt; 了。果断去去把这个插件删除了。接下来重启 &lt;code&gt;goagent-gtk.py&lt;/code&gt;，立马就满血了。好开心，有可以翻墙了。&lt;/p&gt;

&lt;p&gt;兹作记录。&lt;/p&gt;

<img src="http://img.tongji.linezing.com/3379661/tongji.gif" border="0" /></description>
                <link>http://williamlfang.github.com/cn/2014/08/13/goagent-qi-dong-hou-wu-fan-ying-de-wen-ti-jie-jue-fang-fa/</link>
                <guid>http://williamlfang.github.com/cn/2014/08/13/goagent-qi-dong-hou-wu-fan-ying-de-wen-ti-jie-jue-fang-fa/</guid>
                <pubDate>2014-08-13 00:00:00 +0800</pubDate>
                <category>Google</category>
　             　<author>ccbikai</author>
        </item>

        <item>
                <title>军工版块整理</title>
                <description>&lt;h5 id=&quot;httpxueqiucom839488184330619814&quot;&gt;&amp;gt; 主要参考&lt;a href=&quot;http://xueqiu.com/8394881843/30619814&quot;&gt;军工集团整理&lt;/a&gt;&lt;/h5&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;section&quot;&gt;中国兵器工业集团&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;北化股份  &lt;/li&gt;
  &lt;li&gt;华锦股份  &lt;/li&gt;
  &lt;li&gt;江南红箭  &lt;/li&gt;
  &lt;li&gt;晋西车轴 &lt;/li&gt;
  &lt;li&gt;北方股份 &lt;/li&gt;
  &lt;li&gt;北方导航                             &lt;/li&gt;
  &lt;li&gt;凌云股份 &lt;/li&gt;
  &lt;li&gt;长春一东 &lt;/li&gt;
  &lt;li&gt;光电股份 &lt;/li&gt;
  &lt;li&gt;北方创业 &lt;/li&gt;
  &lt;li&gt;北方国际 &lt;/li&gt;
  &lt;li&gt;辽通化工&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-1&quot;&gt;中国兵器装备集团&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;湖南天雁 &lt;/li&gt;
  &lt;li&gt;西仪股份 &lt;/li&gt;
  &lt;li&gt;中原特钢 &lt;/li&gt;
  &lt;li&gt;利达光电 &lt;/li&gt;
  &lt;li&gt;中国嘉陵 &lt;/li&gt;
  &lt;li&gt;*st天威                              &lt;/li&gt;
  &lt;li&gt;长安汽车 &lt;/li&gt;
  &lt;li&gt;北方国际&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-2&quot;&gt;中国航天科技集团&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;航天电子 &lt;/li&gt;
  &lt;li&gt;航天动力 &lt;/li&gt;
  &lt;li&gt;中国卫星 &lt;/li&gt;
  &lt;li&gt;航天机电&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-3&quot;&gt;中国航天科工集团&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;航天长峰 &lt;/li&gt;
  &lt;li&gt;航天通信 &lt;/li&gt;
  &lt;li&gt;航天晨光 &lt;/li&gt;
  &lt;li&gt;航天科技 &lt;/li&gt;
  &lt;li&gt;航天信息 &lt;/li&gt;
  &lt;li&gt;航天电器&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-4&quot;&gt;中国航空工业集体&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;洪都航空 &lt;/li&gt;
  &lt;li&gt;哈飞股份 &lt;/li&gt;
  &lt;li&gt;中航电子 &lt;/li&gt;
  &lt;li&gt;成发科技 &lt;/li&gt;
  &lt;li&gt;中航黑豹 &lt;/li&gt;
  &lt;li&gt;中航动控&lt;/li&gt;
  &lt;li&gt;中航飞机  &lt;/li&gt;
  &lt;li&gt;中航重机 &lt;/li&gt;
  &lt;li&gt;航空动力 &lt;/li&gt;
  &lt;li&gt;中航机电 &lt;/li&gt;
  &lt;li&gt;贵航股份 &lt;/li&gt;
  &lt;li&gt;成飞集成&lt;/li&gt;
  &lt;li&gt;中航光电 &lt;/li&gt;
  &lt;li&gt;*st三鑫 &lt;/li&gt;
  &lt;li&gt;中航地产 &lt;/li&gt;
  &lt;li&gt;飞亚达A  &lt;/li&gt;
  &lt;li&gt;深天马A  &lt;/li&gt;
  &lt;li&gt;天虹商场&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-5&quot;&gt;中国电子科技集团&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;四创电子 &lt;/li&gt;
  &lt;li&gt;国瑞科技 &lt;/li&gt;
  &lt;li&gt;太极股份 &lt;/li&gt;
  &lt;li&gt;华东电脑 &lt;/li&gt;
  &lt;li&gt;卫士通 &lt;/li&gt;
  &lt;li&gt;杰赛科技&lt;/li&gt;
  &lt;li&gt;海康威视&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-6&quot;&gt;中国船舶工业集团&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;中国船舶 &lt;/li&gt;
  &lt;li&gt;中船股份 &lt;/li&gt;
  &lt;li&gt;广船国际&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-7&quot;&gt;中国船舶重工集团&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;中国重工 &lt;/li&gt;
  &lt;li&gt;风帆股份&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-8&quot;&gt;中国核工业集团&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;中核科技 &lt;/li&gt;
  &lt;li&gt;中核太白 &lt;/li&gt;
  &lt;li&gt;中核国际&lt;/li&gt;
&lt;/ul&gt;
<img src="http://img.tongji.linezing.com/3379661/tongji.gif" border="0" /></description>
                <link>http://williamlfang.github.com/cn/2014/08/11/jun-gong-ban-kuai-zheng-li/</link>
                <guid>http://williamlfang.github.com/cn/2014/08/11/jun-gong-ban-kuai-zheng-li/</guid>
                <pubDate>2014-08-11 00:00:00 +0800</pubDate>
                <category>金融</category>
　             　<author>ccbikai</author>
        </item>

        <item>
                <title>ggplot2入门之qplot</title>
                <description>&lt;p&gt;据说 &lt;code&gt;R&lt;/code&gt; 中那些优秀的扩展包（packages）都可以独立成一个新的统计软件，成为独霸一方的「草莽大王」，都值得我们为此「大书特书」一番。比如，时下我们会深入介绍的这款专门由于制作漂亮而不失矜持、俏丽而不失内涵、简单而不失充实的扩展包 – &lt;code&gt;ggplot2&lt;/code&gt;。然而，如果你只是把我们今天的主角简单的看作是一款为数据画图的工具的话，那么这就有失偏颇了。乍一看，似乎我们传统的思维是把数据的可（zuo）视（tu）化（xing）仅仅作为统计分析的一个附属品，权做为说明而做的图形展现。这就好比是一场豪华婚礼中只能配得的「伴娘」，虽然自身也是穿衣戴宝的，却始终不能为大家器重。不知大家有没有想过，如果我们可以同时把数据的统计分析结果与数据直观特征图形结合在一起，通过这两者的交互印证，使得分析的结果更加具有说服力。说的更加直白一些，往往有些数据的特征是无法使用自然或者数理语言简明扼要的说清楚的，这时候就需要图形化的展示来提供更加充足的信息。也就是说，利用对数据制作「量体裁衣」的可视化展现，可以为我们的提供更加全面的信息，也在一定程度上为后期的数据统计分析提供直观的印象。&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;section&quot;&gt;数据可视化的基本思想&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;ggplot2&lt;/code&gt; 能够使用简单的语法将数据的属性特征以图形可视化的形式展示出来，丰富了我们对数据的直观影响。不过，需要注意的，&lt;code&gt;ggplot2&lt;/code&gt; 只是提供了一套静态的图形输出，尤其是适合与 PDF 格式的文件。但在现在互联网与移动屏的可视化时代，难免显得有点力不从心，无法满足我们对交互式图形的诉求。因此， Rstudio 公司后来在 Xie Yihui 同学的领导下，开发了适合与显示器屏幕的动态交互式图形输出包—— &lt;code&gt;Shiny&lt;/code&gt;，以满足互联网移动屏幕的新要求。这个我们在今后介绍如何使用 \R 开发网页时再具体介绍。&lt;/p&gt;

&lt;p&gt;因此，Hadley 一上来就开宗明义的「提醒」大家不要仅仅把  &lt;code&gt;ggplot2&lt;/code&gt; 当作是一个绘图工具而已：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt; `ggplot2` is a `R` package for producing statistical, or data, graphics, **but it is unlike most other graphics packages because it has a deep underlying grammer**.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;这里所说的图形的「语法」（grammer），最早由 Wilkinson 提出，大体的思想是把一个数据图形看作由描述数据不同特征的属性所构成的套装，通过对不同组件的选择，来达到想要（甚至是想不到）的套装效果。这其中，不同的属性组件包括了：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;数据：通常要求数据结构是 &lt;code&gt;data.frame&lt;/code&gt;。所谓的「裸数据」，就是未经任何修改的原始数据。&lt;/li&gt;
  &lt;li&gt;几何对象：&lt;code&gt;geom&lt;/code&gt; , 希望以直观的几何图形来显示数据特征，如点、线条等。&lt;/li&gt;
  &lt;li&gt;统计转换：&lt;code&gt;stat&lt;/code&gt;,以数据统计分析的结果展示在图形中，这比传统的将统计输出单独展现具有更加直观的认识。&lt;/li&gt;
  &lt;li&gt;scales：&lt;/li&gt;
  &lt;li&gt;坐标系统：&lt;code&gt;coord&lt;/code&gt;, 描述了如何将数据通过多维图形展现出来。&lt;/li&gt;
  &lt;li&gt;分页展示：&lt;code&gt;facet&lt;/code&gt;,  就是把不同组别的数据通过分页的形式表示出来，这相当于做了一次 subsetting 的分组。&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-1&quot;&gt;用法说明&lt;/h2&gt;

&lt;p&gt;下面，我们来具体看看如何使用 &lt;code&gt;qplot&lt;/code&gt; 绘制精美的数据可视化图形。
&lt;code&gt;qplot&lt;/code&gt; 的基本用法和 &lt;code&gt;plot&lt;/code&gt; 大体类似。主要的参数输入有：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;数据：主要是使用 $x$ 和 $y$ 作为两个坐标轴，并且指定数据框类数据 \rcode{data}；&lt;/li&gt;
  &lt;li&gt;图形修饰：这个主要是通过 \rcode{aesthetics} 参数来完成，包括了
    &lt;ul&gt;
      &lt;li&gt;&lt;code&gt;color&lt;/code&gt;：使用不同的颜色来区分数据&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;size&lt;/code&gt;：利用形状来区分数据&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;fill&lt;/code&gt;：主要是在进行 &lt;code&gt;histogram&lt;/code&gt; 和 &lt;code&gt;density&lt;/code&gt; 的时候用于填充不同的数据，使得各种数据的比例更加直观明显。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;几何形状方面：利用 &lt;code&gt;geom&lt;/code&gt; 来控制输出的图形几何形状，包括了
    &lt;ul&gt;
      &lt;li&gt;&lt;code&gt;geom = &quot;point&quot;&lt;/code&gt;：作为默认设置，以点的形式画图；&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;geom = &quot;line&quot;&lt;/code&gt;：以线条的样子输出，通常适用于&lt;strong&gt;时间序列数据&lt;/strong&gt;；&lt;/li&gt;
      &lt;li&gt;&lt;code&gt;geom = &quot;smooth&quot;&lt;/code&gt;：使用统计拟合输出；
 &amp;gt; &lt;code&gt;geom = &quot;path&quot;&lt;/code&gt;：与时间序列类似，但是按照数据的先后顺序输出；
 &amp;gt; &lt;code&gt;geom = &quot;boxplot&quot;&lt;/code&gt;：输出传统统计学角度的「箱叶图」，以五个&lt;strong&gt;quantile&lt;/strong&gt; 作标记；
 &amp;gt; &lt;code&gt;geom = &quot;jitter&quot;&lt;/code&gt;：类似于「箱叶图」，但是更加突出数据的分散描述，可以使用 &lt;code&gt;alpha = I ()&lt;/code&gt; 来控制分散的透明程度；
 &amp;gt; &lt;code&gt;geom = &quot;histogram&quot;&lt;/code&gt;：柱状图，可以使用参数 &lt;code&gt;binwidth&lt;/code&gt; 来控制间隔大小；
 &amp;gt; &lt;code&gt;geom = &quot;density&quot;&lt;/code&gt;：概率分布图；&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;我们可以通过使用 &lt;code&gt;help(qplot)&lt;/code&gt; 命令来查看其基本的函数结构：&lt;/p&gt;

    &lt;p&gt;qplot(x, y = NULL, …, data, facets = NULL, margins = FALSE,
    geom = “auto”, stat = list(NULL), position = list(NULL), xlim = c(NA,
    NA), ylim = c(NA, NA), log = “”, main = NULL,
    xlab = deparse(substitute(x)), ylab = deparse(substitute(y)), asp = NA)&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;通过使用几个简单的例子，我们想要看看具体是如何操作的。使用的数据是由自带的钻石品质的数据框。 该数据库一共包含了 $10$ 个变量的数据，共计 $53,940$ 次观测值。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;str(diamonds)

## 'data.frame':	53940 obs. of  10 variables:
##  $ carat  : num  0.23 0.21 0.23 0.29 0.31 0.24 0.24 0.26 0.22 0.23 ...
##  $ cut    : Ord.factor w/ 5 levels &quot;Fair&quot;&amp;lt;&quot;Good&quot;&amp;lt;..: 5 4 2 4 2 3 3 3 1 3 ...
##  $ color  : Ord.factor w/ 7 levels &quot;D&quot;&amp;lt;&quot;E&quot;&amp;lt;&quot;F&quot;&amp;lt;&quot;G&quot;&amp;lt;..: 2 2 2 6 7 7 6 5 2 5 ...
##  $ clarity: Ord.factor w/ 8 levels &quot;I1&quot;&amp;lt;&quot;SI2&quot;&amp;lt;&quot;SI1&quot;&amp;lt;..: 2 3 5 4 2 6 7 3 4 5 ...
##  $ depth  : num  61.5 59.8 56.9 62.4 63.3 62.8 62.3 61.9 65.1 59.4 ...
##  $ table  : num  55 61 65 58 58 57 57 55 61 61 ...
##  $ price  : int  326 326 327 334 335 336 336 337 337 338 ...
##  $ x      : num  3.95 3.89 4.05 4.2 4.34 3.94 3.95 4.07 3.87 4 ...
##  $ y      : num  3.98 3.84 4.07 4.23 4.35 3.96 3.98 4.11 3.78 4.05 ...
##  $ z      : num  2.43 2.31 2.31 2.63 2.75 2.48 2.47 2.53 2.49 2.39 ...

head(diamonds)

##   carat       cut color clarity depth table price    x    y    z
## 1  0.23     Ideal     E     SI2  61.5    55   326 3.95 3.98 2.43
## 2  0.21   Premium     E     SI1  59.8    61   326 3.89 3.84 2.31
## 3  0.23      Good     E     VS1  56.9    65   327 4.05 4.07 2.31
## 4  0.29   Premium     I     VS2  62.4    58   334 4.20 4.23 2.63
## 5  0.31      Good     J     SI2  63.3    58   335 4.34 4.35 2.75
## 6  0.24 Very Good     J    VVS2  62.8    57   336 3.94 3.96 2.48

typeof(diamonds)

## [1] &quot;list&quot;

df &amp;lt;- diamonds
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;我们以钻石的重量（carat）与其相应的价格作为分析入手，自觉立马会告诉我们，一颗同等品质的钻石，其重量越大，则相应的价格就越高，换句话说，价格与重量应该是一个递增函数的关系。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  qplot(x = carat, y = price, data = df)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-08-04-ggplot2-ru-men-zhi-qplot/unnamed-chunk-3.png&quot; alt=&quot;plot of chunk unnamed-chunk-3&quot; /&gt; 
可以看出，钻石的价格与其重量呈现指数型递增关系的。因此，我们可以对其做一个对数变换，希望得到一个线性的函数关系。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  qplot(x = log(carat), y = log(price), data = df)  ## qplot() 支持对变量函数的输入
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-08-04-ggplot2-ru-men-zhi-qplot/unnamed-chunk-4.png&quot; alt=&quot;plot of chunk unnamed-chunk-4&quot; /&gt; 
果不其然，这是一个非常完美的线性关系。不过我们也需要警惕图形的「过分拟合」。这是后话，以后有机会再探讨 &lt;/p&gt;

&lt;p&gt;此外，我们可以使用 &lt;code&gt;color&lt;/code&gt; 参数来控制第三个变量（一般是分类变量）来查看钻石的颜色是否也会影响其价格。具体的命令如下&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  qplot(x = carat, y = price, data = df, color = color)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-08-04-ggplot2-ru-men-zhi-qplot/unnamed-chunk-5.png&quot; alt=&quot;plot of chunk unnamed-chunk-5&quot; /&gt; &lt;/p&gt;

&lt;p&gt;同样的，使用 &lt;code&gt;shape&lt;/code&gt; 来查看形状效果&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  qplot(x = carat, y = price, data = df, shape = cut, color = color)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-08-04-ggplot2-ru-men-zhi-qplot/unnamed-chunk-6.png&quot; alt=&quot;plot of chunk unnamed-chunk-6&quot; /&gt; &lt;/p&gt;

&lt;p&gt;以上我们介绍了如何控制「修饰」成分命令下面，我们来查看一下如何控制图形输出的「几何」形状。这个主要是通过 &lt;code&gt;geom&lt;/code&gt; 来实现的。&lt;/p&gt;

&lt;p&gt;使用 &lt;code&gt;smooth&lt;/code&gt; 制作拟合。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;qplot(x = carat, y = price, data = df, geom = c(&quot;point&quot;, &quot;smooth&quot;), color = color)

## geom_smooth: method=&quot;auto&quot; and size of largest group is &amp;gt;=1000, so using gam with formula: y ~ s(x, bs = &quot;cs&quot;). Use 'method = x' to change the smoothing method.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-08-04-ggplot2-ru-men-zhi-qplot/unnamed-chunk-7.png&quot; alt=&quot;plot of chunk unnamed-chunk-7&quot; /&gt; &lt;/p&gt;

&lt;p&gt;这个是「箱叶图」&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;qplot(x = color, y = price, data = df, geom = &quot;boxplot&quot;, color = color)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-08-04-ggplot2-ru-men-zhi-qplot/unnamed-chunk-8.png&quot; alt=&quot;plot of chunk unnamed-chunk-8&quot; /&gt; &lt;/p&gt;

&lt;p&gt;再来一个&lt;code&gt;jitter&lt;/code&gt;，同时我们使用参数 &lt;code&gt;alpha = I()&lt;/code&gt; 来控制渐变的效果。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;qplot(x = color, y = price, data = df, geom = &quot;jitter&quot;, alpha = I(1/5))
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-08-04-ggplot2-ru-men-zhi-qplot/unnamed-chunk-9.png&quot; alt=&quot;plot of chunk unnamed-chunk-9&quot; /&gt; &lt;/p&gt;

&lt;p&gt;或者我们想要一个柱状图，则可以使用命令&lt;code&gt;histogram&lt;/code&gt;， 同时使用参数 &lt;code&gt;binwidth&lt;/code&gt; 来控制间距，使用 &lt;code&gt;fill&lt;/code&gt; 来填。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;qplot(x = carat, data = df, geom = &quot;histogram&quot;, binwidth = .05, fill = color)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-08-04-ggplot2-ru-men-zhi-qplot/unnamed-chunk-10.png&quot; alt=&quot;plot of chunk unnamed-chunk-10&quot; /&gt; &lt;/p&gt;

&lt;p&gt;或者来一个概率分布图，使用 &lt;code&gt;geom = &quot;density&quot;&lt;/code&gt; 来实现&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;qplot(x = price, data = df, geom = &quot;density&quot;, color = color)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-08-04-ggplot2-ru-men-zhi-qplot/unnamed-chunk-11.png&quot; alt=&quot;plot of chunk unnamed-chunk-11&quot; /&gt; &lt;/p&gt;

&lt;p&gt;在实证金融数据分析中，我们经常会遇到形形色色的时间序列数据，对于时间序列数据，我们可以使用 &lt;code&gt;geom = &quot;line&quot;&lt;/code&gt; 或者 &lt;code&gt;geom = &quot;path&quot;&lt;/code&gt; 来表明数据随时间变化的特征。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;df2 &amp;lt;- data.frame(x = seq(1, 100), y = rnorm(100))
qplot(x, y, data = df2, geom=c(&quot;point&quot;,&quot;line&quot;), col = &quot;red&quot;)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-08-04-ggplot2-ru-men-zhi-qplot/unnamed-chunk-12.png&quot; alt=&quot;plot of chunk unnamed-chunk-12&quot; /&gt; &lt;/p&gt;

&lt;pre&gt;&lt;code&gt;df3 &amp;lt;- data.frame(x = rnorm(1000), y = rnorm(1000))
qplot(x, y, data = df3, geom=c(&quot;point&quot;,&quot;line&quot;))
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-08-04-ggplot2-ru-men-zhi-qplot/unnamed-chunk-131.png&quot; alt=&quot;plot of chunk unnamed-chunk-13&quot; /&gt; &lt;/p&gt;

&lt;pre&gt;&lt;code&gt;qplot(x, y, data = df3, geom=c(&quot;point&quot;,&quot;path&quot;))
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-08-04-ggplot2-ru-men-zhi-qplot/unnamed-chunk-132.png&quot; alt=&quot;plot of chunk unnamed-chunk-13&quot; /&gt; 
&lt;code&gt;geom = &quot;line&quot;&lt;/code&gt; 与 &lt;code&gt;geom = &quot;path&quot;&lt;/code&gt; 的差别在于前者使用了时间序列数据是按照一定的观测值顺序排列的，而后者则仅仅是按照数据的呈现方式出现。这个需要我们反思在七十年代的时候美国经济学术界内轰轰烈烈的激战是否存在「Philips Curve」，即政府是否存在可以协调经济通胀率与失业率的良方。原先的数据只是按照数据简单的排序，并没有考虑到收集数据内在的时间先后顺序，从而得出通胀率与失业率可替代的结论。而后来这个经过 Friedman 等人的卓越工作，才揭示了原来政府的这套政策是行不通的，原因在于人们是具有理性预期的，如果真的按照政府的经济政策来实施，则会发生「替换性选择」，最终导致政策无效。这个就是典型的使用数据制作「path」图形的案例。}&lt;/p&gt;

&lt;p&gt;当然，我么也可以使用 &lt;code&gt;facets&lt;/code&gt; 来对不同数据子集分别画图，得到不同的图形对比&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;qplot(x = price, data = df, facets = cut~., geom = &quot;density&quot;, color = color)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-08-04-ggplot2-ru-men-zhi-qplot/unnamed-chunk-14.png&quot; alt=&quot;plot of chunk unnamed-chunk-14&quot; /&gt; &lt;/p&gt;

<img src="http://img.tongji.linezing.com/3379661/tongji.gif" border="0" /></description>
                <link>http://williamlfang.github.com/cn/2014/08/04/ggplot2-ru-men-zhi-qplot/</link>
                <guid>http://williamlfang.github.com/cn/2014/08/04/ggplot2-ru-men-zhi-qplot/</guid>
                <pubDate>2014-08-04 00:00:00 +0800</pubDate>
                <category>R</category>
　             　<author>ccbikai</author>
        </item>

        <item>
                <title>使用Quantmod下载沪深股票数据及分析</title>
                <description>&lt;p&gt;今天来到公司上班，本来是想安装软件来查看股市行情以及个股变动情况。由于前几天笔记本不知原因、不明就理的「罢工」，导致我又得重新安装系统和所需的软件。话说回来，其实我们大都习惯了通过证券公司开发的软件来查看昨日行情走势，我们也大都习以为惯了，平时要是真遇到什么小问题，也大都能忍则忍，并不太在乎真实的使用感受。所有的“user-friendly”，大概也就谈谈罢了。&lt;/p&gt;

&lt;p&gt;早上有同事跟我反应说，她在查看股市，尤其是个股情况，看到满屏幕花花绿绿的数据，本来就不怎么清醒的脑袋又开始昏昏欲睡了。我又跟她简短的聊了几句，发现其实她对沪深股市最想要得到的就是综合指数以及个股股价的走势，那些买家成交量、K线图形、最大最小变化数据等等，基本上是冗余的信息，不仅不能增进她对股市行情的整体判断，反而会干扰她的分析。现实中，我们经常遇到过量的数据信息输入往往起不到辅助决策的作用。&lt;/p&gt;

&lt;p&gt;针对这位同事反应的问题。我大概有几点思考的。&lt;/p&gt;

&lt;!-- more --&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;首先，我们的交易软件其实可以根据不同客户的信息异质性需求，为他们提供「私人定制」的信息套件。比如有些客户可能会比较习惯寻找共同行业版块中几个典型企业作为分析的着手，根据对行业里各个上市公司的总体分析，能够获得对个股走势的宏观判断与整体认识。再比如，有些客户可能只是想知道在过去的几个周期里面个股股价的总体趋势，他不想要看到诸如成交量、买卖双方、K线、蜡烛图等等。那么，我们在做客户服务时，其实可以从客户需求的角度来思考，并且从产品设计、软件架构、服务流程等一一入手，做到「能用、有用、实用、好用」的全新服务层次。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;接着上面的一点，我发现自己所在的金顾部门需要改进的几个方面。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;首先，我们需要一定的技能能力，这包括但不限于专业理论知识储备、对市场实务体系的深刻了解、对产品特性的独到把握、具备一定等级程度的量化分析技能、掌握至少一个以上的编程语言。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;说到专业，毋庸置疑，我们需要对现代金融理论的发展脉络及其发展前沿具有扎实的理论功力。现代金融的发展包括资产定价（Asset Pricing）与公司金融（Corporate Finance）两大模块。从金顾的职能角色上看，我们至少需要知道目前有哪些比较成功的可用于理解股票市场波动与演变的理论模型，比如 CAPM、C-CAPM、APT 等，清楚的知道公司的财务分析报表如何为分析上市公司未来股价提供有价值的信息。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;而关于量化分析的方法，我个人比较推荐大家能够学习一些比较实用的编程语言，比如善于处理数据统计分析与图形化展示的 R 语言，专注矩阵分析与模拟的 Matlab 系统，能用用于处理大量互联网数据的 Python 等。尤其是 R，既是一种编译环境，也是一种数据编程语言，是免费开源项目，网上具有非常丰富的软件包可供免费下载使用。可以说，R 是目前分析数据与图形绘制的最好的编程语言，没有之一。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;今天的主题是关于如何使用 R 中的一款优秀的有些「过分」的开源软件包，&lt;strong&gt;quantmod&lt;/strong&gt;。quantmod包：Quantitative Financial Modelling Framework。其目的在于为量化交易者提供一个进行建模的平台，目前的主要功能是获取交易数据进行处理并绘制交易图形。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;首先，我们先去 Yahoo Finance 上面找到不同指数或者个股对应的股票名称或者股票代码。比如，我们现在想要看看上证指数的基本情况，那么，其所对应的名称是 「&lt;strong&gt;^ SSEC&lt;/strong&gt;」。或者是深圳 A 股，对应的代码是「&lt;strong&gt;^ SZSA&lt;/strong&gt;」对于股票代码，这里需要区分沪市和深市的情况，在相应的代码后面添加「&lt;strong&gt;.ss&lt;/strong&gt;」或者是「&lt;strong&gt;.sz&lt;/strong&gt;」。比如，对于在沪市交易的浦发银行，其股票代码为 &lt;strong&gt;600000&lt;/strong&gt;，则可以取 &lt;strong&gt;600000.ss&lt;/strong&gt;。比如，我们查看在深圳上市的「招商地产」，其股票代码在深市为 &lt;strong&gt;000024&lt;/strong&gt;，则可以取 &lt;strong&gt;000024.sz&lt;/strong&gt;。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;其次，我们使用函数 &lt;strong&gt;getSymbols()&lt;/strong&gt; 来获取需要运用于后续分析的金融数据。则可以使用命令&lt;/p&gt;

    &lt;p&gt;上海综合 &amp;lt;-getSymbols(“^SSEC”,from = “2004-01-01”, ## 上海综合指数
             to = Sys.Date(),src = “yahoo”,auto.assign=FALSE)
   chartSeries(上海综合, theme = theme.black)&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a href=&quot;/cn/assets/images/r-figures/2014-07-09-shi-yong-quantmod-xia-zai-hu-shen-gu-piao-shu-ju-ji-fen-xi/上海综合.png&quot;&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-07-09-shi-yong-quantmod-xia-zai-hu-shen-gu-piao-shu-ju-ji-fen-xi/上海综合.png&quot; alt=&quot;plot of chunk 上海综合&quot; /&gt;&lt;/a&gt; &lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  深圳A股 &amp;lt;-getSymbols(&quot;^SZSA&quot;,from = &quot;2014-01-01&quot;, 
              to = Sys.Date(),src = &quot;yahoo&quot;,auto.assign=FALSE)
  chartSeries(深圳A股, theme = theme.black, TA = &quot;addEnvelop()&quot;)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href=&quot;/cn/assets/images/r-figures/2014-07-09-shi-yong-quantmod-xia-zai-hu-shen-gu-piao-shu-ju-ji-fen-xi/深圳A股.png&quot;&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-07-09-shi-yong-quantmod-xia-zai-hu-shen-gu-piao-shu-ju-ji-fen-xi/深圳A股.png&quot; alt=&quot;plot of chunk 深圳A股&quot; /&gt;&lt;/a&gt; &lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;对于个股，我们也举一个简单的例子。比如招商地产，000024.sz&lt;/p&gt;

    &lt;p&gt;招商地产 &amp;lt;- getSymbols(“000024.sz”, from = “2000-01-01”, ## 招商地产
             to = Sys.Date(),src = “yahoo”,auto.assign=FALSE)
   chartSeries(招商地产, theme = theme.black)
   candleChart(招商地产, theme = theme.black,
               TA = “addVo(); addSMA(); addEnvelope();
               addMACD(); addMomentum(); addROC()”)&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a href=&quot;/cn/assets/images/r-figures/2014-07-09-shi-yong-quantmod-xia-zai-hu-shen-gu-piao-shu-ju-ji-fen-xi/招商地产.png&quot;&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-07-09-shi-yong-quantmod-xia-zai-hu-shen-gu-piao-shu-ju-ji-fen-xi/招商地产.png&quot; alt=&quot;plot of chunk 深圳A股&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;通常，如果有些客户可能会对技术分析比较喜欢，想要在图形中使用一些基本的技术分析指标。通常，这个可以使用 &lt;strong&gt;addXXX()&lt;/strong&gt; 来实现。比如添加包螺线，可以使用 &lt;strong&gt;addEnvelope()&lt;/strong&gt;。&lt;/p&gt;

    &lt;p&gt;神州泰越 &amp;lt;- getSymbols(“300002.sz”, from = “2013-01-01”, 
             to = Sys.Date(),src = “yahoo”,auto.assign=FALSE)
   chartSeries(神州泰越, theme = theme.white,
               TA = “addVo(); addSMA(); addEnvelope();
               addMACD(); addMomentum(); addROC()”)
   # addLines(h=100, col = “white”) ## mean(神州泰越[,1])
   # addLines(h=200, col = “white”) ## mean(神州泰越[,1])
   addLines(v = which(神州泰越[,4] == max(神州泰越[,4])), 
             col = “gray”)             &lt;br /&gt;
   #addLines(v = which(神州泰越[“2014-01-01/”,4] == max(神州泰越[“2014-01-01/”,4])), col = “blue”)&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a href=&quot;/cn/assets/images/r-figures/2014-07-09-shi-yong-quantmod-xia-zai-hu-shen-gu-piao-shu-ju-ji-fen-xi/神州泰越.png&quot;&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-07-09-shi-yong-quantmod-xia-zai-hu-shen-gu-piao-shu-ju-ji-fen-xi/神州泰越.png&quot; alt=&quot;plot of chunk 神州泰越&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
<img src="http://img.tongji.linezing.com/3379661/tongji.gif" border="0" /></description>
                <link>http://williamlfang.github.com/cn/2014/07/09/shi-yong-quantmod-xia-zai-hu-shen-gu-piao-shu-ju-ji-fen-xi/</link>
                <guid>http://williamlfang.github.com/cn/2014/07/09/shi-yong-quantmod-xia-zai-hu-shen-gu-piao-shu-ju-ji-fen-xi/</guid>
                <pubDate>2014-07-09 00:00:00 +0800</pubDate>
                <category>工作</category>
　             　<author>ccbikai</author>
        </item>

        <item>
                <title>简历技术派</title>
                <description>&lt;p&gt;找工作至少要准备两种以上格式的简历，注意，这里值得不是中文或者英文的，而是具体的简历呈现的格式。&lt;/p&gt;

&lt;p&gt;我非常不推荐使用 Word 来编辑简历，主要是因为&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;MS 经常对 office 进行更新，动不动的我们就得升级，可能你电脑的 office 已经升级到了 2013 年，可是你老板公司却只能使用 XP 的，这样HR可能就无法查收使用 word 制作的简历了&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;最要命的，我们经常发现本来已经调好各种格式 的word 简历，却在另外的一台电脑里莫名其妙的出现格式错误，与原来设计的完全不同，甚至有时还会出现乱码的情况。所以，找工作，远离 MS 啊。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section&quot;&gt;简历的两种境界&lt;/h2&gt;

&lt;p&gt;我这里推荐使用两种文件格式来制作简历。&lt;/p&gt;

&lt;!-- more --&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;首选当然是 LaTeX 啦。这个可是说是制作简历的神器，页面非常的美观，而且最后得到的 pdf 格式的文件通杀所有系统，能够完美无差的在不同的电脑、系统、环境中查看。再者，使用 LaTeX 本身也是一件拉风的事情，当 HR 在经过一整天的 Word 那丑陋而又抽风的格调后，相信第一眼看到完美的 pdf 会神清气爽的。（当然，简历最重要的要有「料」，如果你的能力与阅历本来就不甚了了，那可能真的埋踏了神器）。&lt;/p&gt;

    &lt;p&gt;前段时间我使用 LaTeX 制作了一个带有时间标签的&lt;a href=&quot;http://williamlfang.qiniudn.com/cv/william_cn.pdf&quot;&gt;简历&lt;/a&gt;，里面可以对工作经历做时间上的排序，方便 HR 查看。颜色可以按照个人偏好选择。我使用的是金桔色，代表着「青春与活力」，希望自己在将来的工作中也「满腹热血」而非「满腹牢骚」，纵然「满腹经论」，好歹也得努力工作让家人「满脸幸福」。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;其次，我们可以尝试制作一个应用 Html5 技术的网页版简历，生成的文档可是直接加入到 Email 正文。现在好多公司由于保密问题，通常不接受带附件的简历，那么，有用一款可以直接在邮件中文里显示的简历页面，将使你受益颇多。而且，现在的 Html5 技术已经非常成熟，可以制作一个异常漂亮的简历页面，里面还可以提供相应的链接，使得单页的简历在内容上得到扩展，增加你的筹码。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;html5-&quot;&gt;Html5 制作简历&lt;/h2&gt;

&lt;p&gt;我原来本是打算直接用先前制作好的 pdf 格式来转成 Html 代码（这个可以使用 &lt;strong&gt;pdf2htmlEX&lt;/strong&gt; 来实现，详见我的帖子，&lt;a href=&quot;http://williamlfang.github.io/cn/2014/03/30/pdf-zhuan-html-de-fang-fa/&quot;&gt;PDF转HTML的方法&lt;/a&gt;）。可是最后发现， 如果是直接将代码拷贝到邮件正文，根本就不可能被编译成 html（我在 Linux 系统下使用 Thunderbird）。因此，也就死了这条贪图便捷的心。还是乖乖的动手写代码吧。&lt;/p&gt;

&lt;p&gt;思路还是蛮简单的，就是将 Html5 的代码全部放在一个邮件的文档里面。如果有外部链接，如图片、文件、音频等，这可以使用超链接的方式插入。全部代码包括几部分&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;表头部分：用于显示网页标题。&lt;/p&gt;

    &lt;pre&gt;&lt;code&gt;  &amp;lt;!DOCTYPE html&amp;gt;
  &amp;lt;!--[if lt IE 7]&amp;gt;      &amp;lt;html class=&quot;no-js lt-ie9 lt-ie8 lt-ie7&quot;&amp;gt; &amp;lt;![endif]--&amp;gt;
  &amp;lt;!--[if IE 7]&amp;gt;         &amp;lt;html class=&quot;no-js lt-ie9 lt-ie8&quot;&amp;gt; &amp;lt;![endif]--&amp;gt;
  &amp;lt;!--[if IE 8]&amp;gt;         &amp;lt;html class=&quot;no-js lt-ie9&quot;&amp;gt; &amp;lt;![endif]--&amp;gt;
  &amp;lt;!--[if gt IE 8]&amp;gt;&amp;lt;!--&amp;gt; 
  &amp;lt;html class=&quot;no-js&quot;&amp;gt; &amp;lt;!--&amp;lt;![endif]--&amp;gt;
  &amp;lt;head&amp;gt;
  &amp;lt;meta charset=&quot;utf-8&quot;&amp;gt;
  &amp;lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot;&amp;gt;
  &amp;lt;title&amp;gt;William · 方 莲&amp;lt;/title&amp;gt;  	&amp;lt;!-- &amp;lt;title&amp;gt;My sweet one page CV&amp;lt;/title&amp;gt; --&amp;gt;
  &amp;lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;css&lt;/strong&gt;：使用 &lt;strong&gt;&lt;style type=&quot;text/css&quot;&gt; &lt;/style&gt;&lt;/strong&gt; 引入，主要控制页面格式、相应方式、动画顺序、字体、颜色等。这部分往往是比较难的部分，可以找网上的帖子来做参考，省去一笔不必要的时间浪费。&lt;/p&gt;

    &lt;p&gt;比如，我通常会选择在简历中添加 Google+、Facebook、新浪微薄等链接，方便 HR 直接跳转到更多的咨询。这点在传统的纸质简历中是难以想象到的。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a href=&quot;/cn/assets/images/r-figures/2014-03-31-jian-li-ji-shu-pai/cvex01.png&quot;&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-03-31-jian-li-ji-shu-pai/cvex01.png&quot; alt=&quot;cvex01&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;再举个例子，我使用带有时间轴的标签，这个可以通过一下命令完成：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;  .time {
  width: 20%;
  display: inline;
  float: left;
  text-align: right;
  width: 70px;
  margin-right: 20px;
  font-size: 15px;      /* -------------   time font size --------------------*/
  font-weight: bold;
  }
  
  .timeline {
  width: 80%;
  display: inline-block;
  }
  .timeline .element {
  margin: 0;
  padding: 0 0 10px 20px;
  border-left: 4px solid #4ec5e0;   /* 时间轴的宽度， 颜色: border-left: 4px solid #f1f1f1;   */
  -webkit-transition: 1s ease;
  -moz-transition: 1s ease;
  -o-transition: 1s ease;
  transition: 1s ease;
  }
  /*
  .timeline .element h3 {
  display: inline-block;
  }
  */
  .timeline .element:hover {
  border-left: 4px solid #c2d9a1;
  cursor: pointer;
  }
  .timeline .element:hover {
  -webkit-transition: 1s ease;
  -moz-transition: 1s ease;
  -o-transition: 1s ease;
  transition: 1s ease;
  }
  .timeline .element::before {
   content: &quot; &quot;;
  color: white;
  background: white;
  display: inline-block;
  margin-left: -29px;
  position: absolute;
  padding: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
  height: 12px;
  width: 12px;
  -webkit-border-radius: 6px;
  -moz-border-radius: 6px;
  -ms-border-radius: 6px;
  -o-border-radius: 6px;
  border-radius: 6px;
  }
  .timeline .element ul {
  list-style-type: square;
  padding-left: 15px;
  margin: 0;
  }
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;section-1&quot;&gt;快来快来看一看&lt;/h2&gt;

&lt;p&gt;得到的显示效果如下&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/cn/assets/images/r-figures/2014-03-31-jian-li-ji-shu-pai/cvex02.png&quot;&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-03-31-jian-li-ji-shu-pai/cvex02.png&quot; alt=&quot;cvex02&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;这样，我们在给 HR 发送简历的时候，就可以使用 Thunderbird 的「插入 Html 」功能来实现网页版本的简历申请了。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/cn/assets/images/r-figures/2014-03-31-jian-li-ji-shu-pai/cvex03.png&quot;&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-03-31-jian-li-ji-shu-pai/cvex03.png&quot; alt=&quot;cvex03&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/cn/assets/images/r-figures/2014-03-31-jian-li-ji-shu-pai/cvex04.png&quot;&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-03-31-jian-li-ji-shu-pai/cvex04.png&quot; alt=&quot;cvex04&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/cn/assets/images/r-figures/2014-03-31-jian-li-ji-shu-pai/cvex05.png&quot;&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-03-31-jian-li-ji-shu-pai/cvex05.png&quot; alt=&quot;cvex05&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

<img src="http://img.tongji.linezing.com/3379661/tongji.gif" border="0" /></description>
                <link>http://williamlfang.github.com/cn/2014/03/31/jian-li-ji-shu-pai/</link>
                <guid>http://williamlfang.github.com/cn/2014/03/31/jian-li-ji-shu-pai/</guid>
                <pubDate>2014-03-31 00:00:00 +0800</pubDate>
                <category>Tech</category>
　             　<author>ccbikai</author>
        </item>

        <item>
                <title>PDF转HTML的方法</title>
                <description>&lt;p&gt;今天本来是想要给公司人力资源部发送简历，顺便做了一些调改，是以附件的PDF格式呈送的。可是那边的却通知我说公司有规定，不能在邮件里直接打开附件（有时甚至会直接被视为病毒删除掉）。因此，我只好另寻方法，既能够满足我使用&lt;em&gt;LaTeX&lt;/em&gt;制作简历的极客范，又能符合公司的客观规定。&lt;/p&gt;

&lt;p&gt;一来我现在使用的系统是&lt;strong&gt;Linux Mint&lt;/strong&gt;，不存在说需要使用&lt;em&gt;Word&lt;/em&gt;制作简历的可能性，而且如果真的制作了，不也是一样需要以附件形式发送嘛——如果你非得使用Word制作简历，那么到时候就只能以「复制、粘贴」的方法写到邮件正文中。可是如此以来，所有的格式都消失了，而且由于&lt;strong&gt;Email&lt;/strong&gt;采用&lt;em&gt;Markup&lt;/em&gt;格式，到时候Word复制粘贴出来的文本几乎无法被正常显示，更不要说让挑剔的人力部来阅读邮件了。二者，我前面也提到了，我极度使用一切与&lt;strong&gt;TeX&lt;/strong&gt;相关的技术，这包括在&lt;strong&gt;R&lt;/strong&gt;中使用&lt;em&gt;knitr&lt;/em&gt;，在&lt;em&gt;Html&lt;/em&gt;网页中显示由&lt;strong&gt;LaTeX&lt;/strong&gt;生成的&lt;em&gt;pdf&lt;/em&gt;文档，使用&lt;em&gt;Pandoc&lt;/em&gt;转化&lt;em&gt;markdown&lt;/em&gt;为pdf输出等等。&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;section&quot;&gt;解决思路&lt;/h2&gt;

&lt;p&gt;不怕有问题，我们需要相信强大的黑客社区与开源社区。针对我今天遇到的这个问题，其实已经有人早早就提出来了，而且还写了一个小程序来实现。&lt;/p&gt;

&lt;p&gt;其实想法很简单：既然不让使用附件传送PDF格式的简历，那么，我们现在换一种思路，将其转化成&lt;em&gt;markup&lt;/em&gt;语言，然后在邮件正文就能够显示出来符合原来文件排版的简历内容了。这个问题放大了看，其实就是如何在浏览器中显示PDF文档。原来的解决思路是通过浏览器自带的阅读器来打开该格式的文档，比如Chrome等。然而，这对系统运行难免带来压力，有些时候Chrome打开一个PDF文件非常的卡，非常的慢。&lt;/p&gt;

&lt;p&gt;由&lt;a href=&quot;http://www.cse.ust.hk/~luwang/&quot;&gt;Lu Wang&lt;/a&gt;开发的这个&lt;a href=&quot;https://github.com/coolwanglu/pdf2htmlEX&quot;&gt;&lt;strong&gt;pdf2htmlEX&lt;/strong&gt;&lt;/a&gt;正好解决了这个问题，实现了将PDF文件&lt;strong&gt;精确、无差&lt;/strong&gt;的转化为相应的HTML文件，整个过程支持&lt;strong&gt;LaTeX&lt;/strong&gt;语法，尤其适用与包含了&lt;strong&gt;LaTeX&lt;/strong&gt;数学公式的文档。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;首先，我们经过&lt;strong&gt;LaTeX&lt;/strong&gt;编译后得到了一个pdf简历。这里面既可以包括文字、图形、照片，又可以包括诸如数学公式、特殊符号在内的各种格式。&lt;/li&gt;
  &lt;li&gt;然后，使用&lt;em&gt;pdf2htmlEX&lt;/em&gt;，实现「无缝对接」，得到了一个html文件。&lt;/li&gt;
  &lt;li&gt;之后，我们便可以像对待其他html格式文件一样的，乐趣所需。&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-1&quot;&gt;安装方法&lt;/h2&gt;

&lt;p&gt;在Linux中有两种安装方法，一种是直接在终端输入命令语句安装，另一种是自己按照各种依赖包一路安装到底。前者简单适用，后者过于复杂。我这里介绍如何使用前一种方法安装&lt;strong&gt;pdf2htmlEX&lt;/strong&gt;。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo apt-add-repository ppa:coolwanglu/pdf2htmlex
sudo apt-get update
sudo apt-get install pdf2htmlex
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;安装成功后，我们可以查看一下相应的版本&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo pdfhtmlex --version
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;同时，可以查看使用手册&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;pdf2htmlEX –help
man pdf2htmlEX
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href=&quot;/cn/assets/images/r-figures/2014-03-30-pdf-zhuan-html-de-fang-fa/pdf2htmlEX01.png&quot;&gt;&lt;img src=&quot;/cn/assets/images/r-figures/2014-03-30-pdf-zhuan-html-de-fang-fa/pdf2htmlEX01.png&quot; alt=&quot;pdf2htmlEX01&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;section-2&quot;&gt;使用&lt;/h2&gt;

&lt;p&gt;现在，「万事具备」，只需要一个命令就可以实现：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;pdf2htmlEX “test.pdf”
&lt;/code&gt;&lt;/pre&gt;

<img src="http://img.tongji.linezing.com/3379661/tongji.gif" border="0" /></description>
                <link>http://williamlfang.github.com/cn/2014/03/30/pdf-zhuan-html-de-fang-fa/</link>
                <guid>http://williamlfang.github.com/cn/2014/03/30/pdf-zhuan-html-de-fang-fa/</guid>
                <pubDate>2014-03-30 00:00:00 +0800</pubDate>
                <category>Tech</category>
　             　<author>ccbikai</author>
        </item>

        <item>
                <title>Page 183 184</title>
                <description>&lt;p&gt;假定短期利率在风险中性测度下（等价鞅测度）服从以下随机过程
$$
\begin{align}
 dr_t &amp;amp;= \theta dt + \sigma dW_t &lt;br /&gt;
 \Rightarrow
 \int&lt;em&gt;{s}^{t} dr_t &amp;amp;= \int&lt;/em&gt;{s}^{t} \theta dt + \int&lt;em&gt;{s}^{t}  \sigma dW_t &lt;br /&gt;
  \Rightarrow
  r(t) &amp;amp;= r(s) + \theta (t-s) + \sigma  \int&lt;/em&gt;{s}^{t}  dW_t &lt;br /&gt;
\end{align}
$$&lt;/p&gt;

&lt;p&gt;则在同样的等价鞅测度下，零息票债券的价格为
$$
\begin{align}
 P(t,T) &amp;amp;= E^{Q}\bigg[ e^{ - \int_{t}^{T} r(u) du } \bigg| \mathcal{F}_t \bigg]
\end{align}
$$&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;同时，我们令 $X(t,T)$ 为一个有关短期利率的线性关系，我们在前面提过，短期利率 $\boxed{r(t)  = \cdots + \sigma  \int&lt;em&gt;{s}^{t}  dW_t}$ 是一个服从正太分布的变量（从布朗运动的正太分布特征得到），因而 $X(t,T)$ 也是一个服从正太分布的随机变量。
$$
\begin{align*}
 X(t,T) &amp;amp;= \int&lt;/em&gt;{t}^{T} r(u) du = \int&lt;em&gt;{t}^{T} r(t) du + \int&lt;/em&gt;{t}^{T} \theta (u-t) du + \int&lt;em&gt;{t}^{T}  \sigma du \int&lt;/em&gt;{t}^{u}  dW&lt;em&gt;\epsilon &lt;br /&gt;
 &amp;amp;= r(t)(T-t) + \frac{\theta}{2}(T-t)^2 + \int&lt;/em&gt;{t}^{T}  \sigma du \int&lt;em&gt;{t}^{u}  dW&lt;/em&gt;\epsilon &lt;br /&gt;
 \Rightarrow
 E\bigg[ X(t,T) \bigg| \mathcal{F}&lt;em&gt;t \bigg]
 &amp;amp;= r(t)(T-t) + \frac{\theta}{2}(T-t)^2 + \int&lt;/em&gt;{t}^{T}  \sigma du \underbrace{ E\bigg[  \int&lt;em&gt;{t}^{u}  dW&lt;/em&gt;\epsilon}&lt;em&gt;{0}  \bigg] &lt;br /&gt;
 &amp;amp;= r(t)(T-t) + \frac{\theta}{2}(T-t)^2  &lt;br /&gt;
 \Rightarrow
 Var\bigg[ X(t,T) \bigg| \mathcal{F}_t \bigg]
 &amp;amp;= \sigma^2 E\bigg[ \int&lt;/em&gt;{t}^{T} du 
      \bigg( \int&lt;em&gt;{t}^{u} dW&lt;/em&gt;{\epsilon} \cdot   \int&lt;em&gt;{t}^{v} dW&lt;/em&gt;{\epsilon}  \bigg) 
      \int&lt;em&gt;{t}^{T} dv \bigg| \mathcal{F}_t \bigg] &lt;br /&gt;
  &amp;amp;= \sigma^2 \int&lt;/em&gt;{t}^{T} du \int&lt;em&gt;{t}^{\min{u,v}} d\epsilon  \int&lt;/em&gt;{t}^{T} dv &lt;br /&gt;
  &amp;amp;= 2 \sigma^2 \int&lt;em&gt;{t}^{v} (u-t) du \int&lt;/em&gt;{t}^{T} dv &lt;br /&gt;
  &amp;amp;= 2 \sigma^2 \int&lt;em&gt;{t}^{T} \bigg( \frac{1}{2} u^2 - u t \bigg)\bigg|_t^v dv  &lt;br /&gt;
  &amp;amp;= 2 \sigma^2 \int&lt;/em&gt;{t}^{T} \bigg( \frac{1}{2} v^2 - vt + \frac{1}{2} t^2 \bigg) dv &lt;br /&gt;
  &amp;amp;= \sigma^2 \int_{t}^{T} (v-t)^2 dv &lt;br /&gt;
  &amp;amp;= \frac{\sigma^2}{3} (v-t)^3\bigg|_t^T &lt;br /&gt;
  &amp;amp;= \frac{\sigma^2}{3} (T-t)^3 &lt;br /&gt;
  \Rightarrow
  X(t,T) &amp;amp;\sim \mathcal{N}\bigg( r(t)(T-t) + \frac{\theta}{2}(T-t)^2, \frac{\sigma^2}{3} (T-t)^3 \bigg)
\end{align*}
$$&lt;/p&gt;

&lt;p&gt;我们可以利用正太分布函数的矩阵生成函数来推导债券价格的公式。
$$
\begin{align}
 P(t,T) &amp;amp;= E^{Q}\bigg[ e^{ - X(t,T) } \bigg| \mathcal{F}_t \bigg] &lt;br /&gt;
 &amp;amp;= e^{ -\mu_X + \frac{1}{2} \sigma_X^2} &lt;br /&gt;
 &amp;amp;= e^{ -r(t)(T-t) - \frac{\theta}{2}(T-t)^2 + \frac{\sigma^2}{6} (T-t)^3 } &lt;br /&gt;
 &amp;amp;= A(t,T) e^{ -B(t,T) r(t) } &lt;br /&gt;
 A(t,T)  &amp;amp;= e^{ - \frac{\theta}{2}(T-t)^2 + \frac{\sigma^2}{6} (T-t)^3  } &lt;br /&gt;
 B(t,T)  &amp;amp;= (T-t)
\end{align}
$$&lt;/p&gt;

&lt;p&gt;下面我们来推导远期利率的公式。&lt;/p&gt;

&lt;p&gt;$$
\begin{align}
 f(t,T) &amp;amp;= -\frac{\partial \ln P(t,T)}{ \partial T} &lt;br /&gt;
 &amp;amp;= r_t + \theta(T-t) - \frac{\sigma^2}{2} (T-t)^2
\end{align}
$$
根据 &lt;strong&gt;Ito formula&lt;/strong&gt;，有
$$
\begin{align}
 df(t,T) &amp;amp;= \underbrace{f’&lt;em&gt;t}&lt;/em&gt;{-\theta + \sigma^2(T-t)} dt + \underbrace{f’&lt;em&gt;{r}}&lt;/em&gt;{1} dr_t  + \frac{1}{2} \underbrace{f’‘&lt;em&gt;{rr}}&lt;/em&gt;{0} dr_tdr_t  &lt;br /&gt;
 &amp;amp;= \bigg[ -\theta + \sigma^2(T-t) \bigg] dt + \bigg( \theta dt + \sigma dW_t \bigg) &lt;br /&gt;
 &amp;amp;= \boxed{
   \sigma^2(T-t) dt +  \sigma dW_t
 }
\end{align}
$$&lt;/p&gt;

&lt;p&gt;从以上关系可以看到，远期利率的漂移项依赖于短期利率的瞬时波动项，即$\mu_{f(t,T)} = \sigma^2(T-t)$，这个是典型的具有 &lt;strong&gt;HJM&lt;/strong&gt; 模型特征。我们将在下一回细解。&lt;/p&gt;
<img src="http://img.tongji.linezing.com/3379661/tongji.gif" border="0" /></description>
                <link>http://williamlfang.github.com/cn/2014/03/27/page-183-184/</link>
                <guid>http://williamlfang.github.com/cn/2014/03/27/page-183-184/</guid>
                <pubDate>2014-03-27 00:00:00 +0800</pubDate>
                <category>Finance</category>
　             　<author>ccbikai</author>
        </item>

        <item>
                <title>远期利率与互换利率</title>
                <description>&lt;p&gt;下面我们来推导远期利率与互换利率。这两个利率变量常常在金融建模中有重要的作用。&lt;/p&gt;

&lt;h2 id=&quot;fra&quot;&gt;远期利率互换(FRA)&lt;/h2&gt;

&lt;p&gt;远期利率互换（Forward Rate Agreement）指的是这样一种金融合约，$FRA(t; T, S)$:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;在 $t$ 时期确定的；&lt;/li&gt;
  &lt;li&gt;到 $T$ 以事先约定的支付金额 $K$;&lt;/li&gt;
  &lt;li&gt;交割到期日为 $S$ 的债券。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;其合约价值为
$$
\begin{align}
 V_{FRA} &amp;amp;= N P(t, S) \tau(T, S) \big[ K- L(T, S) \big], \label{value-fra}
\end{align}
$$
其中，$\tau(T,S)$ 表示在两个时期的时间差，通常按照年为单位计算。$L(T,S)$ 是简单复合利率，通常指的是&lt;strong&gt;LIBOR&lt;/strong&gt;。下面我们来求得远期即期利率$F(t;T,S)$。&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;由式子$\eqref{value-fra}$展开
$$
\begin{align}
 V_{FRA} &amp;amp;= N \Big[ P(t, S) \tau(T, S)  K - P(t, S) \tau(T, S)  L(T, S) \Big].
\end{align}
$$
根据无套利条件，我们有以下关系成立(详细推导见：Filipovic: Term Structure Model: A Graduate Course)
$$
\begin{align}
 P(t,S) &amp;amp;= P(t,T) P(T,S)
\end{align}
$$&lt;/p&gt;

&lt;p&gt;同时,我们有&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[

\begin{align}
 L(T,S) :=&amp; \frac{1}{\tau(T,S)}\Big( \frac{1}{P(T,S)} - 1 \Big) \\
 \tau(T,S)L(T,S)  =&amp; \frac{1}{P(T,S)} - 1 \\ 
\end{align}
 %]]&gt;&lt;/script&gt;

&lt;p&gt;因此，
$$
\begin{align}
 V_{FRA} &amp;amp;= N \Big[ P(t, S) \tau(T, S)  K - P(t, S) \tau(T, S)  L(T, S) \Big] &lt;br /&gt;
   &amp;amp;= N \Big[ P(t, S) \tau(T, S)  K - P(t, S) \big(\frac{1}{P(T,S)} - 1 \big) \Big] &lt;br /&gt;
   &amp;amp;= N  \Big[ P(t, S) \tau(T, S)  K -   \big(\frac{P(t, S)}{P(T,S)} - P(t, S) \big) \Big]  &lt;br /&gt;
   &amp;amp;= N  \Big[ P(t, S) \tau(T, S)  K -   P(t,T)  + P(t, S)  \Big] 
\end{align}
$$&lt;/p&gt;

&lt;h2 id=&quot;section&quot;&gt;远期即期利率&lt;/h2&gt;

&lt;p&gt;在无套利的要求下，远期即期利率（Future spot rate）必需满足一个「公平价格」的原则，即使得远期利率协议的价值为零的利率水平，则
$$
\begin{align}
 V_{FRA} &amp;amp;= 0 = N  \Big[ P(t, S) \tau(T, S)  F(t;T,S) -   P(t,T)  + P(t, S)  \Big] &lt;br /&gt;
 \Rightarrow 
 F(t;T,S) &amp;amp;= \frac{1}{\tau(T,S)} \bigg[ \frac{P(t,T)}{P(t,S)} - 1 \bigg].
\end{align}
$$&lt;/p&gt;

&lt;h2 id=&quot;irs&quot;&gt;利率互换（IRS）&lt;/h2&gt;

&lt;p&gt;下面我们来介绍另外一种利率产品：利率互换（Interest Rate Swap,IRS):&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;固定支付：约定在未来的一个时间段内按照合同约定的比例支付，假定该水平值为 $K$&lt;/li&gt;
  &lt;li&gt;浮动利率：合同的另一方则需要根据合同拟采用的浮动利率水平来做对冲支付，一般而言，该浮动利率为短期简单复利的&lt;strong&gt;LIBOR&lt;/strong&gt;, $L(T&lt;em&gt;{i-1}, T&lt;/em&gt;{i})$。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;我们记该时间段为 $\mathcal{T} = { T&lt;em&gt;{\alpha}, T&lt;/em&gt;{\alpha+1},\cdots,T&lt;em&gt;{\beta - 1}, T&lt;/em&gt;{\beta}}$，$\tau&lt;em&gt;{i} = \tau(T&lt;/em&gt;{i-1}, T&lt;em&gt;{i}),$ 且有 $\mathcal{\tau} = { \tau&lt;/em&gt;{\alpha + 1}, \tau&lt;em&gt;{\alpha+2},\cdots,\tau&lt;/em&gt;{\beta - 1}, \tau_{\beta}}$ 。&lt;/p&gt;

&lt;p&gt;则我们可以得到 IRS 的合约价值为
$$
\begin{align}
 V&lt;em&gt;{IRS} &amp;amp;= \sum&lt;/em&gt;{i=\alpha+1}^{\beta} D(t,T_i) N \tau_i \bigg[ K - L(T&lt;em&gt;{i-1}, T&lt;/em&gt;{i}) \bigg] \label{value-irs}
\end{align}
$$&lt;/p&gt;

&lt;p&gt;对比 $\eqref{value-fra}$ 和 $\eqref{value-irs}$，我们不难发现，利率互换可以看作来一系列的远期利率协议的总和，即
$$
\begin{align}
  V&lt;em&gt;{IRS} &amp;amp;= \sum&lt;/em&gt;{i=\alpha+1}^{\beta} V&lt;em&gt;{FRA}  &lt;br /&gt;
  &amp;amp;= \sum&lt;/em&gt;{i=\alpha+1}^{\beta} N P(t, T_i) \tau_i \big[ K- F(t;T&lt;em&gt;{i-1},T&lt;/em&gt;{i}) \big] &lt;br /&gt;
  &amp;amp;= N \sum&lt;em&gt;{i=\alpha+1}^{\beta}  P(t, T_i) \tau_i  K - N \boxed{ \sum&lt;/em&gt;{i=\alpha+1}^{\beta} P(t, T_i) \tau_i F(t;T&lt;em&gt;{i-1},T&lt;/em&gt;{i}) }.
\end{align}
$$&lt;/p&gt;

&lt;p&gt;对于方框内的式子，我们可以做如下运算
$$
\begin{align&lt;em&gt;}
&amp;amp; \boxed{ \sum_{i=\alpha+1}^{\beta}  P(t, T_i) \tau_i F(t;T_{i-1},T_{i})  }  &lt;br /&gt;
 =&amp;amp; \sum_{i=\alpha+1}^{\beta}  P(t, T_i) \tau(T_{i-1},T_{i}) \cdot \frac{1}{\tau(T_{i-1},T_{i})} \bigg[ \frac{P(t,T_{i-1})}{P(t,T_{i})} - 1 \bigg] &lt;br /&gt;
 =&amp;amp; \sum_{i=\alpha+1}^{\beta} \bigg[ P(t,T_{i-1}) - P(t,T_{i}) \bigg]  &lt;br /&gt;
 =&amp;amp;  P(t,T_{\alpha}) - P(t,T_{\beta})
\end{align&lt;/em&gt;}
$$&lt;/p&gt;

&lt;p&gt;从而，
$$
\begin{align}
 V&lt;em&gt;{IRS} &amp;amp;=  N \sum&lt;/em&gt;{i=\alpha+1}^{\beta}  P(t, T_i) \tau_i  K - N \bigg( P(t,T&lt;em&gt;{\alpha}) - P(t,T&lt;/em&gt;{\beta}) \bigg)
\end{align}
$$&lt;/p&gt;

&lt;h2 id=&quot;swap-rate&quot;&gt;互换利率（Swap Rate）&lt;/h2&gt;

&lt;p&gt;同理，为来得到无套利条件，我们要求互换利率使得该利率互换的价值为零，即
$$
\begin{align}
 V&lt;em&gt;{IRS} &amp;amp;= 0 = N \sum&lt;/em&gt;{i=\alpha+1}^{\beta}  P(t, T_i) \tau_i   S&lt;em&gt;{\alpha, \beta} (t)  - N \bigg( P(t,T&lt;/em&gt;{\alpha}) - P(t,T&lt;em&gt;{\beta}) \bigg) &lt;br /&gt;
 \Rightarrow 
 S&lt;/em&gt;{\alpha, \beta} (t) &amp;amp;= \frac{ P(t,T&lt;em&gt;{\alpha}) - P(t,T&lt;/em&gt;{\beta}) }{ \sum_{i=\alpha+1}^{\beta}  P(t, T_i) \tau_i }
 \end{align}
$$&lt;/p&gt;

&lt;p&gt;对此，我们可以这样理解：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;首先，投资者为了对冲未来利率不确定所带来的影响，要求在未来的某个时间段内以固定的收益 $P(t,T&lt;em&gt;{\alpha})$ 提前买入债券，而将在更远的未来 $T&lt;/em&gt;{\beta}$ 抛售手里的债券，价值为 $P(t,T&lt;em&gt;{\beta})$，其总和的盈余收益为 $P(t,T&lt;/em&gt;{\alpha}) - P(t,T_{\beta})$。&lt;/li&gt;
  &lt;li&gt;在合约期间，投资者放弃的机会成本总共为 $\sum_{i=\alpha+1}^{\beta}  P(t, T_i) \tau_i$。&lt;/li&gt;
  &lt;li&gt;因此，在满足市场无套利的条件下，互换利率因该使得该投资策略的超额收益率是零，即该投掷策略的收益与互换利率持平，是故
$$
\begin{align}
 S&lt;em&gt;{\alpha, \beta} (t) &amp;amp;= \frac{ P(t,T&lt;/em&gt;{\alpha}) - P(t,T&lt;em&gt;{\beta}) }{ \sum&lt;/em&gt;{i=\alpha+1}^{\beta}  P(t, T_i) \tau_i   }
 \end{align}
$$&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-1&quot;&gt;远期即期利率与远期互换利率的关系&lt;/h2&gt;

&lt;p&gt;我们知道任一两个债券价格可以通过远期即期利率产生联系，例如
$$
\begin{align}
 \frac{P(t,T&lt;em&gt;{k})}{P(t,T&lt;/em&gt;{\alpha})}
 &amp;amp;= \frac{P(t,T&lt;em&gt;{\alpha + 1})}{P(t,T&lt;/em&gt;{\alpha})} \cdot \frac{P(t,T&lt;em&gt;{\alpha + 2})}{P(t,T&lt;/em&gt;{\alpha + 1})} \cdots \frac{P(t,T&lt;em&gt;{\beta})}{P(t,T&lt;/em&gt;{\beta - 1})}  &lt;br /&gt;
 &amp;amp;= \prod&lt;em&gt;{j=\alpha+1}^{k} \frac{1}{1 + \tau_j F(t;T&lt;/em&gt;{j-1}, T_j)}
\end{align}
$$&lt;/p&gt;

&lt;p&gt;从而，我们也可以利用这个关系来推导得到远期即期利率与远期互换利率的关系
$$
\begin{align}
 S&lt;em&gt;{\alpha, \beta} (t) &amp;amp;= \frac{ P(t,T&lt;/em&gt;{\alpha}) - P(t,T&lt;em&gt;{\beta}) }{ \sum&lt;/em&gt;{i=\alpha+1}^{\beta}  P(t, T_i) \tau_i  K } &lt;br /&gt;
 &amp;amp;= \frac{ 1 - \frac{P(t,T&lt;em&gt;{\beta})}{P(t,T&lt;/em&gt;{\alpha})} }{ \sum&lt;em&gt;{i=\alpha+1}^{\beta} \tau_i \frac{P(t, T_i) }{ P(t,T&lt;/em&gt;{\alpha}) } }  &lt;br /&gt;
 &amp;amp;= \frac{ 1 - \prod&lt;em&gt;{j=\alpha+1}^{\beta} \frac{1}{1 + \tau_j F(t;T&lt;/em&gt;{j-1}, T_j)} }{ \sum&lt;em&gt;{i=\alpha+1}^{\beta} \tau_i \prod&lt;/em&gt;{j=\alpha+1}^{i} \frac{1}{1 + \tau_j F(t;T_{j-1}, T_j)}  }&lt;br /&gt;
 \end{align}
$$&lt;/p&gt;

<img src="http://img.tongji.linezing.com/3379661/tongji.gif" border="0" /></description>
                <link>http://williamlfang.github.com/cn/2014/03/26/yuan-qi-li-lv-yu-hu-huan-li-lv/</link>
                <guid>http://williamlfang.github.com/cn/2014/03/26/yuan-qi-li-lv-yu-hu-huan-li-lv/</guid>
                <pubDate>2014-03-26 00:00:00 +0800</pubDate>
                <category>金融</category>
　             　<author>ccbikai</author>
        </item>

        <item>
                <title>落得白发苍茫</title>
                <description>&lt;p&gt;不复年少惶惶，落得白发苍茫。&lt;/p&gt;

<img src="http://img.tongji.linezing.com/3379661/tongji.gif" border="0" /></description>
                <link>http://williamlfang.github.com/cn/2014/03/17/luo-de-bai-fa-cang-mang/</link>
                <guid>http://williamlfang.github.com/cn/2014/03/17/luo-de-bai-fa-cang-mang/</guid>
                <pubDate>2014-03-17 00:00:00 +0800</pubDate>
                <category>个人</category>
　             　<author>ccbikai</author>
        </item>

        <item>
                <title>庖丁解牛之 Ito 公式</title>
                <description>&lt;p&gt;假设股票价格的变化服从以下运动方程（随机微分方程，SDE）：
$$
\begin{align}
 d S_t = \mu S_t dt + \sigma S_t dW_t,
\end{align}
$$
其中 $dW_t$ 是一个（连续的）&lt;strong&gt;Brownian motion&lt;/strong&gt;，$W_t \sim \mathcal{N} (0, t)$。等价的，我们可以得到股票价格变化率：
$$
\begin{align}
 d \ln S_t = \frac{ d S_t }{ S_t } = \mu dt + \sigma dW_t.
\end{align}
$$&lt;/p&gt;

&lt;p&gt;下面我们来推导股票价格 $S_t$ 的动态方程，这主要是使用著名的 &lt;strong&gt;Ito 公式&lt;/strong&gt;。过于理论的东西我在这里不推导了，主要是利用一个简单的例子来说明如何使用 &lt;strong&gt;Ito 公式&lt;/strong&gt; 解 &lt;strong&gt;SDE&lt;/strong&gt; 类问题。&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;ito-&quot;&gt;Ito 公式求解&lt;/h2&gt;

&lt;p&gt;首先，令 $Y_t = ln S_t$，由简单的偏微分求导得到
$$
\begin{align}
\frac{ \partial Y }{ \partial t} &amp;amp;= 0  &lt;br /&gt;
\frac{ \partial Y }{ \partial S} &amp;amp;= \frac{ 1 }{ S }  &lt;br /&gt;
\frac{ \partial^2 Y }{ \partial S^2} &amp;amp;= - \frac{ 1 }{ S^2 }  &lt;br /&gt;
\end{align}
$$
则根据 &lt;strong&gt;Ito 公式&lt;/strong&gt;，我们可以推出以下方程
$$
\begin{align}
 d \ln S_t = d Y_t 
  &amp;amp;= \frac{ \partial Y }{ \partial t} dt + \frac{ \partial Y }{ \partial S} dS_t + \frac{1}{2} \frac{ \partial^2 Y }{ \partial S^2} dS_t dS_t \nonumber&lt;br /&gt;
  &amp;amp;= 0 · dt + \frac{ 1 }{ S_t } dS_t - \frac{1}{2} · \frac{ 1 }{ S_t^2 } dS_t dS_t \nonumber&lt;br /&gt;
  &amp;amp;=  \frac{ 1 }{ S_t } · S_t · (\mu dt + \sigma dW_t) - \frac{1}{2} · \frac{ 1 }{ S_t^2 } · \sigma^2 S_t^2 dt
 \nonumber&lt;br /&gt;
  &amp;amp;= (\mu - \frac{1}{2} \sigma^2) dt + \sigma dW_t. &lt;br /&gt;
\end{align}
$$
两边求积分，得到如下式子
$$
\begin{align}
 \int&lt;em&gt;{0}^{t} d \ln S_u = \int&lt;/em&gt;{0}^{t} d Y_u 
    &amp;amp;= \int&lt;em&gt;{0}^{t}  (\mu - \frac{1}{2} \sigma^2) du + \int&lt;/em&gt;{0}^{t}  \sigma dW_u &lt;br /&gt;
\Rightarrow \ln S_t - \ln S_0 = Y_t - Y_0 &amp;amp;= (\mu - \frac{1}{2} \sigma^2) t + \int&lt;em&gt;{0}^{t}  \sigma dW_u.
\end{align}
$$
我们知道，&lt;strong&gt;Brownian Motion&lt;/strong&gt; 表示在一定时间段内随机游走走过的路径，并且如果我们假定在初始阶段为 $W(0)=0$，那么，上面等式的最后一项是
$$
\begin{align}
\int&lt;/em&gt;{0}^{t}  \sigma dW_u &amp;amp;= \sigma (W_t - W_0 ) = \sigma W_t.
\end{align}
$$&lt;/p&gt;

&lt;p&gt;因此，我们有
$$
\begin{align}
 \ln S_t - \ln S_0 = Y_t - Y_0 &amp;amp;= (\mu - \frac{1}{2} \sigma^2) t + \sigma W_t \nonumber&lt;br /&gt;
  \Rightarrow Y_t &amp;amp;= Y_0 + (\mu - \frac{1}{2} \sigma^2) t + \sigma W_t \nonumber&lt;br /&gt;
 \Rightarrow S_t &amp;amp;= S_0 · \exp{  (\mu - \frac{1}{2} \sigma^2) t + \sigma W_t  }.
\end{align}
$$&lt;/p&gt;

&lt;h2 id=&quot;section&quot;&gt;几何布朗运动&lt;/h2&gt;

&lt;p&gt;我们知道，对于任何一个正态分布做线性转换后依然服从正态分布。由于布朗运动 $W_t \sim \mathcal{N} (0, t)$，则
$$
\begin{align}
  Y_t &amp;amp;= Y_0 + (\mu - \frac{1}{2} \sigma^2) t + \sigma W_t \nonumber&lt;br /&gt;
\Rightarrow E[Y_t|Y_0] &amp;amp;= E[ Y_0 + (\mu - \frac{1}{2} \sigma^2) t + \sigma W_t] \nonumber&lt;br /&gt;
                       &amp;amp;= Y_0 + (\mu - \frac{1}{2} \sigma^2) t + \underbrace{E[\sigma W_t]}_{0} = Y_0 + (\mu - \frac{1}{2} \sigma^2) t &lt;br /&gt;
\Rightarrow Var[Y_t|Y_0] &amp;amp;= Var [\sigma W_t] = \sigma^2 Var(Wt) = \sigma^2 ·t \nonumber&lt;br /&gt;
\Rightarrow Y_t &amp;amp;\sim \mathcal{N}(  Y_0 + (\mu - \frac{1}{2} \sigma^2) t, \sigma^2 t  ) \label{gbm_norm}
\end{align} 
$$&lt;/p&gt;

&lt;p&gt;那么，$\ln S_t = Y_t$ 则服从 &lt;strong&gt;正态分布&lt;/strong&gt;，则 $S_t = e^{Y_t}$服从 &lt;em&gt;log-normal disctribution&lt;/em&gt;，即 $\ln S_t \sim \mathcal{N} (E[S_t], Var[S_t])$.&lt;/p&gt;

&lt;p&gt;下面我们来推导 $S_t$ 的分布特征。&lt;/p&gt;

&lt;h3 id=&quot;moment-generation-function&quot;&gt;Moment Generation Function&lt;/h3&gt;

&lt;p&gt;我们知道，对于对任何一个随机变量建模，往往需要假设该变量服从某一类随机过程，而这个随机过程由分布函数（distribution function）给定。可是，有些时候，我们并不一定需要知道整个分布函数的具体形式，而只是关注该随机变量的几个「统计特征」，如一阶矩、二阶矩等。下面要介绍的「矩条件生成函数」就针对这种情况提出的。随机变量的矩条件可以在 &lt;strong&gt;Moment Generation Function&lt;/strong&gt; (MGF) 十分方便的推导出来。比如，对于正态分布，我们只需要知道一阶矩和二阶矩条件就可以对变量做统计推断（method of moment, MM，还有更一般的 GMM）。&lt;/p&gt;

&lt;p&gt;对于一个&lt;strong&gt;可测空间&lt;/strong&gt; $(\Omega, \mathcal{F}, P)$，随机变量 $X \in \sigma(\mathcal{F})$ 的 MGF 定义为
$$
\begin{align}
 M&lt;em&gt;{X}(\tau) &amp;amp;= E[ e^{x\tau}] = \int&lt;/em&gt;{\Omega} e^{x(\omega)\tau} dP(\omega)
\end{align}
$$
其任一 $m-$ 阶的矩公式可以对 $\tau$ 在 $\tau = 0$ 处求 $m$ 次导数得到
$$
\begin{align}
  \frac{\partial M&lt;em&gt;{X}(\tau)}{\partial \tau}|&lt;/em&gt;{\tau = 0} 
  &amp;amp;=   \frac{\partial}{\partial \tau} E[ e^{x\tau}] |&lt;em&gt;{\tau = 0}&lt;br /&gt;
  =  E[ x · e^{x\tau}] |&lt;/em&gt;{\tau = 0}    \nonumber&lt;br /&gt;
  &amp;amp;= E[x] &lt;br /&gt;
   \frac{\partial ^2 M&lt;em&gt;{X}(\tau)}{\partial \tau ^2 }|&lt;/em&gt;{\tau = 0} 
 &amp;amp;= E[x^2] &lt;br /&gt;
 \frac{\partial ^m M&lt;em&gt;{X}(\tau)}{\partial \tau ^m }|&lt;/em&gt;{\tau = 0} 
 &amp;amp;= E[x^m]
\end{align}
$$
特别的，对于一个正态分布，$X \sim \mathcal{N}(\mu, \sigma^2)$，有
$$
\begin{align}
  M_{X}(\tau) &amp;amp;= E[ e^{x\tau}] = \exp{ \mu \tau + \frac{1}{2} \sigma^2 \tau^2 }
\end{align} &lt;br /&gt;
$$&lt;/p&gt;

&lt;h3 id=&quot;section-1&quot;&gt;期望与方差&lt;/h3&gt;

&lt;p&gt;这个特征对于求一个「对数正态分布」十分有用。由$\eqref{gbm_norm}$
$$
\begin{align}
  Y_t &amp;amp;\sim \mathcal{N}(  Y_0 + (\mu - \frac{1}{2} \sigma^2) t, \sigma^2 t  ) 
\end{align}
$$
则其 MGF 为
$$
\begin{align}
 M_{Y}(\tau) &amp;amp;= E[e^{y\tau}] = \exp{ \tilde{\mu} \tau + \frac{1}{2} \tilde{\sigma}^2 \tau^2 },
\end{align}
$$
其中，$\tilde{\mu} = Y_0 + (\mu - \frac{1}{2} \sigma^2) t$，$\tilde{\sigma}^2= \sigma ^2 t$ .&lt;/p&gt;

&lt;p&gt;因此，我们可以得到如下公式
$$
 \begin{align}
  E[S^{\tau}] &amp;amp;=  E[e^{y\tau}]  = \exp{ \tilde{\mu} \tau + \frac{1}{2} \tilde{\sigma}^2 \tau^2 }
 \end{align}
$$&lt;/p&gt;

&lt;p&gt;即，期望可以表示为
$$
 \begin{align}
  E[S_t] &amp;amp;=  E[e^{y\tau}]|_{\tau = 1}  = \exp{ \tilde{\mu}  + \frac{1}{2} \tilde{\sigma}^2  }  \nonumber&lt;br /&gt;
        &amp;amp;= \exp{ Y_0 + (\mu - \frac{1}{2} \sigma^2) t + \frac{1}{2} \sigma^2 t  } \nonumber&lt;br /&gt;
        &amp;amp;= S_0 · e^{\mu t } &lt;br /&gt;
\end{align}
$$&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[

 \begin{align}
  E[S^2] &amp;= E[e^{y\tau}]|_{\tau = 2}  = \exp\{ 2 \tilde{\mu}  + 2 \tilde{\sigma}^2  \} \nonumber\\
  &amp;= \exp\{ 2 [Y_0 + (\mu - \frac{1}{2} \sigma^2) t ] + 2 \sigma^2 t \}   \nonumber\\
  &amp;= S_0^2 · \exp\{ 2 \mu t + \sigma^2 t\}
 \end{align}
 %]]&gt;&lt;/script&gt;

&lt;p&gt;因此，$S_t$ 的方差可以表示为
$$
 \begin{align}
  Var[S_t] 
  &amp;amp;=   E[S^2] -  ( E[S] )^2 \nonumber&lt;br /&gt;
  &amp;amp;= S_0^2 · \exp{ 2 \mu t + \sigma^2 t} - S_0^2 · \exp{ 2 \mu t } \nonumber&lt;br /&gt;
  &amp;amp;= S_0^2 · e^{ 2 \mu t } · (e^{ \sigma^2 t - 1 })
 \end{align}
$$&lt;/p&gt;

&lt;h2 id=&quot;o-u-process&quot;&gt;O-U Process&lt;/h2&gt;

&lt;p&gt;其实，我们同样可是使用这种方法来解一类更加广义的随机过程——O-U过程。这个过程为
$$
 \begin{align}
  d X(t) &amp;amp;=  - \kappa (X(t) - \theta) d t + \sigma dW(t). \label{ou}
 \end{align}
$$
在式子$\eqref{ou}$中，我们注意到参数 $(\kappa, \theta, \sigma)$ 决定了整个随机过程的特征：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;$\kappa$：是随机过程的「变化率」，即控制了整个随机过程向长期均值回归的快慢程度;&lt;/li&gt;
  &lt;li&gt;$\theta$：代表了随机过程的「长期均值水平」，O-U 过程最显著的特征是其具有了「均值回复」，即在变化率 $\kappa$ 的控制下变量趋于稳定的状态。这个在利率期限结构建模中经常使用，如最早的 Vasicek 利率模型就是一个典型的 O-U 过程。&lt;/li&gt;
  &lt;li&gt;$\sigma$：表示随机过程的「瞬时方差」。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;下面我们来求解显示解。&lt;/p&gt;

&lt;p&gt;首先对方程$\eqref{ou}$在区域 $[0, t]$ 进行积分得到
$$
  \begin{align}
   \int&lt;em&gt;{0}^{t} d X(u) &amp;amp;= -\int&lt;/em&gt;{0}^{t} \kappa X(u) du + \int&lt;em&gt;{0}^{t}  \kappa \theta du +  \int&lt;/em&gt;{0}^{t}  \sigma  dW(u),
  \end{align}
$$
然后两边同时乘以 $e^{\kappa u}$ 得到
$$
\begin{align}
    \int&lt;em&gt;{0}^{t} e^{\kappa u} d X(u) &amp;amp;= -\int&lt;/em&gt;{0}^{t} \kappa X(u) e^{\kappa u} du + \int&lt;em&gt;{0}^{t}  \kappa \theta e^{\kappa u} du +  \int&lt;/em&gt;{0}^{t} \sigma  e^{\kappa u} dW(u). \label{ou-int}
\end{align}
$$
我们分开求解等式两边。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;先是对左边进行&lt;strong&gt;分步积分&lt;/strong&gt;得到
$$
 \begin{align}
 LHS &amp;amp;= e^{\kappa u} X(u) |&lt;em&gt;{u=0}^{t} - \int&lt;/em&gt;{0}^{t} \kappa X(u) e^{\kappa u} du \nonumber &lt;br /&gt;
 &amp;amp;= e^{\kappa t } X(t) - X(0) - \int_{0}^{t} \kappa X(u) e^{\kappa u} du . \label{lhs}
 \end{align}
$$&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;同样的，我们也可以求出右边式子
$$
 \begin{align}
 RHS &amp;amp;= - \int&lt;em&gt;{0}^{t} \kappa X(u) e^{\kappa u} du + \int&lt;/em&gt;{0}^{t} \theta de^{\kappa u} + \int&lt;em&gt;{0}^{t}  \sigma  e^{\kappa u} dW(u) \nonumber&lt;br /&gt;
 &amp;amp;= - \int&lt;/em&gt;{0}^{t} \kappa X(u) e^{\kappa u} du + \theta (e^{\kappa t} - 1) + \int_{0}^{t}  \sigma  e^{\kappa u} dW(u)  \label{rhs}
 \end{align}
$$&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;对比$\eqref{lhs}$与$\eqref{rhs}$，
$$
 \begin{align}
 e^{\kappa t } X(t) - X(0) - \int&lt;em&gt;{0}^{t} \kappa X(u) e^{\kappa u} du
 &amp;amp;= 
 -\int&lt;/em&gt;{0}^{t} \kappa X(u) e^{\kappa u} du + \theta (e^{\kappa t} - 1) + \int&lt;em&gt;{0}^{t}  \sigma  e^{\kappa u} dW(u)  \nonumber &lt;br /&gt;
 e^{\kappa t } X(t) - X(0)
 &amp;amp;= 
 \theta (e^{\kappa t} - 1) + \int&lt;/em&gt;{0}^{t}  \sigma  e^{\kappa u} dW(u)   \nonumber &lt;br /&gt;
\Rightarrow 
  X(t)  &amp;amp;= e^{-\kappa t} (X(0)-\theta) + \theta + \int_{0}^{t}  \sigma  e^{-\kappa (t-u)} dW(u)  \label{oup} &lt;br /&gt;
 \end{align}
$$&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;section-2&quot;&gt;期望&lt;/h3&gt;
&lt;p&gt;由$\eqref{oup}$得到
$$
 \begin{align}
  X(t)  &amp;amp;= e^{-\kappa t} (X(0)-\theta) + \theta + \int&lt;em&gt;{0}^{t}  \sigma  e^{-\kappa (t-u)} dW(u) . \nonumber
 \end{align}
$$
则其期望可以表示为
$$
 \begin{align}
   E[X(t)|X(0)] &amp;amp;= E[ e^{-\kappa t} (X(0)-\theta) + \theta + \int&lt;/em&gt;{0}^{t}  \sigma  e^{-\kappa (t-u)} dW(u) ] \nonumber &lt;br /&gt;
   &amp;amp;= e^{-\kappa t} (X(0)-\theta) + \theta. \label{exp}
 \end{align}
$$
最后一项由 $W_t \sim \mathcal{N} (0, t)$ 得到。&lt;/p&gt;

&lt;p&gt;利用$\eqref{exp}$，我们可以求出 O-U 过程在长期的一个均值回复项，即
$$
 \begin{align}
   \lim_{t \rightarrow + \infty } e^{-\kappa t} (X(0)-\theta) + \theta = \theta.
 \end{align}
$$&lt;/p&gt;

&lt;h3 id=&quot;section-3&quot;&gt;协方差&lt;/h3&gt;

&lt;p&gt;任一区间内 $[s,t]$ 协方差可以由以下求出。
$$
 \begin{align}
   cov(X_s, X_t) 
   &amp;amp;= E[ (X_s-E[X_s])·(X_t-E[X_t])] \nonumber&lt;br /&gt;
   &amp;amp;= \sigma^2 E\bigg[ 
        \int&lt;em&gt;{0}^{s}    e^{-\kappa (s-u)} dW(u) ·
         \int&lt;/em&gt;{0}^{t}   e^{-\kappa (t-v)} dW(v)
            \bigg] \label{cov}
 \end{align}
$$&lt;/p&gt;

&lt;p&gt;这里我们需要使用到两个基本的概念&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;布朗运动的「独立增量」(indepdent increasement)，即任何一个布朗运动在不同期间内的增量是相互独立的，即对于区间 $[0,t], 0 \leq t_0 \leq t_1 \leq \cdots \leq t_n \leq t$, $W(t_1)-W(t_0)$, $W(t_2)-W(t_1)$,$\cdots$, $W(t_n)-W(t_{n-1})$ 是相互独立的增量过程。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Ito Isometry&lt;/strong&gt; 性质：即对于一个布朗运动的独立增量，$dW_t$，有关其多项式有如下性质
$$
 \begin{align}
 E\bigg[ \bigg( \int&lt;em&gt;{0}^{t} F(u) dW(u) \bigg)^2\bigg]
 &amp;amp;= \int&lt;/em&gt;{0}^{t} E \big[ F^2(u) \big] du
 \end{align}
$$&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;利用这两个性质，对于$\eqref{cov}$，如果 $s \geq t$ (反之，$s \leq t$，则令二者调换，即 $t=\min{s,t}$)，我们有
$$
 \begin{align}
   cov(X_s, X_t)
   &amp;amp;=  \sigma^2
   E\bigg[ 
        \bigg( \int&lt;em&gt;{0}^{t}  e^{-\kappa (s-u)} dW(u)  + \int&lt;/em&gt;{t}^{s}   e^{-\kappa (s-u)} dW(u)
        \bigg)
        ·
         \int&lt;em&gt;{0}^{t}  e^{-\kappa (t-v)} dW(v)
            \bigg] &lt;br /&gt;
    &amp;amp;=  \sigma^2
    E\bigg[ 
          \int&lt;/em&gt;{0}^{t}  e^{-\kappa (s-u)} dW(u)  · \int&lt;em&gt;{0}^{t}  e^{-\kappa (t-v)} dW(v) 
           \nonumber &lt;br /&gt;
        &amp;amp; \qquad + \int&lt;/em&gt;{t}^{s}   e^{-\kappa (s-u)} dW(u) · \int&lt;em&gt;{0}^{t}  e^{-\kappa (t-v)} dW(v)
            \bigg] &lt;br /&gt;
     &amp;amp;=  \sigma^2 \Bigg{
     E\bigg[ 
          \int&lt;/em&gt;{0}^{t}  e^{-\kappa (s-u)} dW(u)  · \int&lt;em&gt;{0}^{t}  e^{-\kappa (t-v)} dW(v) 
          \bigg] 
          \nonumber &lt;br /&gt;
    &amp;amp; \qquad +  E\bigg[ 
          \int&lt;/em&gt;{t}^{s}   e^{-\kappa (s-u)} dW(u) · \int_{0}^{t}  e^{-\kappa (t-v)} dW(v)
          \bigg]&lt;br /&gt;
    \Bigg}，    \label{cov1}   &lt;br /&gt;
 \end{align}
$$&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;对于第一项我们需要使用 &lt;strong&gt;Ito Isometry&lt;/strong&gt; 性质,
$$
 \begin{align}
 E\bigg[ 
        \int&lt;em&gt;{0}^{t}  e^{-\kappa (s-u)} dW(u)  · \int&lt;/em&gt;{0}^{t}  e^{-\kappa (t-v)} dW(v) 
        \bigg]
  &amp;amp;=
  E\bigg[ 
        \int_{0}^{t}  e^{-\kappa (s-u)} · e^{-\kappa (t-u)}  du 
        \bigg] &lt;br /&gt;
 \end{align}
$$&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;而第二向可以由布朗运动的独立增量性质消除，
$$
 \begin{align}
 &amp;amp; E\bigg[ 
        \int&lt;em&gt;{t}^{s}   e^{-\kappa (s-u)} dW(u) · \int&lt;/em&gt;{0}^{t}  e^{-\kappa (t-v)} dW(v)
        \bigg] &amp;amp; \nonumber &lt;br /&gt;
  =&amp;amp; E\bigg[ 
        \int&lt;em&gt;{t}^{s}   e^{-\kappa (s-u)} dW(u) 
        \bigg] 
        ·
     E\bigg[ 
       \int&lt;/em&gt;{0}^{t}  e^{-\kappa (t-v)} dW(v)
        \bigg] 
  = 0 
 \end{align}
$$
因此，方程$\eqref{cov1}$变为
$$
 \begin{align}
 cov(X_s, X_t)
 &amp;amp;= \sigma^2 \Bigg{
   E\bigg[ 
        \int&lt;em&gt;{0}^{t}  e^{-\kappa (s-u)} · e^{-\kappa (t-u)}  du 
        \bigg]
   \Bigg}   \label{cov2} &lt;br /&gt;
&amp;amp;= \sigma^2 \Bigg{
    e^{-\kappa (s+t)}
    E\bigg[ 
        \int&lt;/em&gt;{0}^{t}  e^{2\kappa u}  du 
        \bigg]
 \Bigg}&lt;br /&gt;
  = \sigma^2 ·
    e^{-\kappa (s+t)}
    ·
    \frac{1}{2\kappa}
    ·  e^{2\kappa u}\bigg|_{u=0}^{t} &lt;br /&gt;
  &amp;amp;= \frac{\sigma^2}{2\kappa} e^{-\kappa (s+t)} · \Bigg( e^{2\kappa t} -1 \Bigg).
 \end{align}
$$
也就是说，对于任何一个协方差，我们都有
$$
 \begin{align}
 cov(X_s, X_t) 
 &amp;amp;= \frac{\sigma^2}{2\kappa} e^{-\kappa (s+t)} · \Bigg( e^{2\kappa · \min{s,t} } -1 \Bigg).
 \end{align}
$$&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;section-4&quot;&gt;方差&lt;/h3&gt;

&lt;p&gt;方差也就是0阶协方差，
$$
 \begin{align}
   Var(X_t)
   &amp;amp;= cov(X_t, X_t)
   = \frac{\sigma^2}{2\kappa} e^{-\kappa (t+t)} · \Bigg( e^{2\kappa · \min{t,t} } -1 \Bigg) \nonumber&lt;br /&gt;
   &amp;amp;= \frac{\sigma^2}{2\kappa} \Bigg( 1 - e^{ -2\kappa t } \Bigg) 
 \end{align}
$$&lt;/p&gt;

<img src="http://img.tongji.linezing.com/3379661/tongji.gif" border="0" /></description>
                <link>http://williamlfang.github.com/cn/2014/03/16/pao-ding-jie-niu-zhi--ito--gong-shi/</link>
                <guid>http://williamlfang.github.com/cn/2014/03/16/pao-ding-jie-niu-zhi--ito--gong-shi/</guid>
                <pubDate>2014-03-16 00:00:00 +0800</pubDate>
                <category>金融数学</category>
　             　<author>ccbikai</author>
        </item>


</channel>
</rss>
